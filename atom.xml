<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Stephen&#39;s Note</title>
  
  
  <link href="https://choutinghsiao.github.io/atom.xml" rel="self"/>
  
  <link href="https://choutinghsiao.github.io/"/>
  <updated>2023-07-27T14:15:29.373Z</updated>
  <id>https://choutinghsiao.github.io/</id>
  
  <author>
    <name>Stephen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>使用 Flask-Caching 緩存 Flask 呼叫方法產生的資料</title>
    <link href="https://choutinghsiao.github.io/2023/07/07/PythonFlaskCaching/"/>
    <id>https://choutinghsiao.github.io/2023/07/07/PythonFlaskCaching/</id>
    <published>2023-07-07T23:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="安裝套件"><a href="#安裝套件" class="headerlink" title="安裝套件"></a>安裝套件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install Flask</span><br><span class="line">pip install Flask-Caching</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="建立-address-json-內容如下"><a href="#建立-address-json-內容如下" class="headerlink" title="建立 address.json 內容如下"></a>建立 address.json 內容如下</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;新竹市&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Zip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;300&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="建立-app-py-內容如下"><a href="#建立-app-py-內容如下" class="headerlink" title="建立 app.py 內容如下"></a>建立 app.py 內容如下</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_caching <span class="keyword">import</span> Cache</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;DEBUG&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">    <span class="string">&quot;CACHE_TYPE&quot;</span>: <span class="string">&quot;SimpleCache&quot;</span>,</span><br><span class="line">    <span class="string">&quot;CACHE_DEFAULT_TIMEOUT&quot;</span>: <span class="number">3000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config.from_mapping(config)</span><br><span class="line">cache = Cache(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用裝飾器緩存呼叫方法產生的資料</span></span><br><span class="line"><span class="meta">@cache.memoize(<span class="params">timeout=<span class="number">50</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">LoadAllAddress</span>():</span><br><span class="line">    <span class="comment"># 讀取 address.json</span></span><br><span class="line">    file = <span class="built_in">open</span>(<span class="string">&#x27;address.json&#x27;</span>)</span><br><span class="line">    data = json.load(file)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刪除緩存</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/ClearAddressCache&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delAddress</span>():</span><br><span class="line">   <span class="comment"># 刪除緩存呼叫方法產生的資料</span></span><br><span class="line">   cache.delete_memoized(LoadAllAddress)</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;Clear Success&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取得 address.json 的資料</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/GetAllAddress&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">AllAddress</span>():</span><br><span class="line">    <span class="keyword">return</span> LoadAllAddress()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://flask-caching.readthedocs.io/en/latest/">Flask-Caching</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;安裝套件&quot;&gt;&lt;a href=&quot;#安裝套件&quot; class=&quot;headerlink&quot; title=&quot;安裝套件&quot;&gt;&lt;/a&gt;安裝套件&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install Flask&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pip install Flask-Caching&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/tags/Python/"/>
    
    <category term="Flask" scheme="https://choutinghsiao.github.io/tags/Flask/"/>
    
    <category term="Caching" scheme="https://choutinghsiao.github.io/tags/Caching/"/>
    
  </entry>
  
  <entry>
    <title>使用 Flask-SQLAlchemy 連接 MSSQL 進行 CRUD</title>
    <link href="https://choutinghsiao.github.io/2023/07/07/PythonFlaskSQLAlchemy/"/>
    <id>https://choutinghsiao.github.io/2023/07/07/PythonFlaskSQLAlchemy/</id>
    <published>2023-07-07T23:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="安裝套件"><a href="#安裝套件" class="headerlink" title="安裝套件"></a>安裝套件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install Flask</span><br><span class="line">pip install flask-sqlalchemy</span><br><span class="line">pip install pymssql</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="建立-app-py-內容如下"><a href="#建立-app-py-內容如下" class="headerlink" title="建立 app.py 內容如下"></a>建立 app.py 內容如下</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,request,jsonify</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;SQLALCHEMY_TRACK_MODIFICATIONS&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">    <span class="string">&quot;SQLALCHEMY_DATABASE_URI&quot;</span>: <span class="string">&quot;mssql+pymssql://[使用者帳號]:%s@[服務器IP]:[端口]/[資料庫名稱]?charset=utf8&quot;</span>% parse.quote(<span class="string">&#x27;[使用者密碼]&#x27;</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config.from_mapping(config)</span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立資料表對應類別</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddressMap</span>(db.Model):</span><br><span class="line">    <span class="comment"># 資料表名稱</span></span><br><span class="line">    __tablename__ = <span class="string">&#x27;AddressMap&#x27;</span></span><br><span class="line">    <span class="comment"># 唯一識別碼</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># 地址</span></span><br><span class="line">    address = db.Column(db.String(<span class="number">200</span>, collation=<span class="string">&quot;Chinese_Taiwan_Stroke_CI_AS&quot;</span>), unique=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line">    <span class="comment"># 郵區</span></span><br><span class="line">    <span class="built_in">zip</span> = db.Column(db.String(<span class="number">6</span>), unique=<span class="literal">False</span>, nullable=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, address, <span class="built_in">zip</span></span>):</span><br><span class="line">        self.address = address</span><br><span class="line">        self.<span class="built_in">zip</span> = <span class="built_in">zip</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">serialize</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">           <span class="string">&#x27;Id&#x27;</span> : self.<span class="built_in">id</span>,</span><br><span class="line">           <span class="string">&#x27;Address&#x27;</span> : self.address,</span><br><span class="line">           <span class="string">&#x27;Zip&#x27;</span> : self.<span class="built_in">zip</span></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&lt;AddressMap %r&gt;&#x27;</span> % self.address</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.before_first_request</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_table</span>():</span><br><span class="line">    db.create_all()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 建立資料</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/Address/Create&#x27;</span> , methods = [<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Create</span>():</span><br><span class="line">    data = request.json</span><br><span class="line">    address = data[<span class="string">&#x27;Address&#x27;</span>]</span><br><span class="line">    <span class="built_in">zip</span> = data[<span class="string">&#x27;Zip&#x27;</span>]</span><br><span class="line">    addressMap = AddressMap(address=address, <span class="built_in">zip</span>=<span class="built_in">zip</span>)</span><br><span class="line">    db.session.add(addressMap)</span><br><span class="line">    db.session.commit()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Create Success&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取得資料</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/Address/GetAll&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">AllAddress</span>():</span><br><span class="line">    all_address = AddressMap.query.<span class="built_in">all</span>()</span><br><span class="line">    addressList = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x.serialize(), all_address))</span><br><span class="line">    <span class="keyword">return</span> jsonify(result=addressList)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新資料</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/Address/Update&#x27;</span> , methods = [<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Update</span>():</span><br><span class="line">    data = request.json</span><br><span class="line">    <span class="built_in">id</span> = data[<span class="string">&#x27;Id&#x27;</span>]</span><br><span class="line">    address = AddressMap.query.filter_by(<span class="built_in">id</span>=<span class="built_in">id</span>).first()</span><br><span class="line">    <span class="keyword">if</span> address:</span><br><span class="line">        address.verified = <span class="literal">True</span></span><br><span class="line">        address.address = data[<span class="string">&#x27;Address&#x27;</span>]</span><br><span class="line">        address.<span class="built_in">zip</span> = data[<span class="string">&#x27;Zip&#x27;</span>]</span><br><span class="line">        db.session.commit()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Update Success&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 刪除資料</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/Address/Delete&#x27;</span> , methods = [<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Delete</span>():</span><br><span class="line">    data = request.json</span><br><span class="line">    <span class="built_in">id</span> = data[<span class="string">&#x27;Id&#x27;</span>]</span><br><span class="line">    address = AddressMap.query.filter_by(<span class="built_in">id</span>=<span class="built_in">id</span>).first()</span><br><span class="line">    <span class="keyword">if</span> address:</span><br><span class="line">        db.session.delete(address)</span><br><span class="line">        db.session.commit()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Delete Success&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><!-- export FLASK_APP=appflask shellfrom app import db, AddressMapdb.create_all() --><h2 id="使用Curl呼叫API"><a href="#使用Curl呼叫API" class="headerlink" title="使用Curl呼叫API"></a>使用Curl呼叫API</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立資料</span></span><br><span class="line">curl --location <span class="string">&#x27;http://127.0.0.1:5000/Address/Create&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;Address&quot; : &quot;新竹市&quot;,</span></span><br><span class="line"><span class="string">    &quot;Zip&quot; : &quot;300&quot;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取得資料</span></span><br><span class="line">curl --location <span class="string">&#x27;http://127.0.0.1:5000/Address/GetAll&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新資料</span></span><br><span class="line">curl --location <span class="string">&#x27;http://127.0.0.1:5000/Address/Update&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;Id&quot; : 1,</span></span><br><span class="line"><span class="string">    &quot;Address&quot; : &quot;新竹市&quot;,</span></span><br><span class="line"><span class="string">    &quot;Zip&quot; : &quot;999&quot;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 刪除資料</span></span><br><span class="line">curl --location <span class="string">&#x27;http://127.0.0.1:5000/Address/Delete&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;Id&quot; : 1</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://flask-sqlalchemy.palletsprojects.com/en/3.0.x/">Flask-SQLAlchemy</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;安裝套件&quot;&gt;&lt;a href=&quot;#安裝套件&quot; class=&quot;headerlink&quot; title=&quot;安裝套件&quot;&gt;&lt;/a&gt;安裝套件&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install Flask&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pip install flask-sqlalchemy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pip install pymssql&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/tags/Python/"/>
    
    <category term="Flask" scheme="https://choutinghsiao.github.io/tags/Flask/"/>
    
    <category term="MSSQL" scheme="https://choutinghsiao.github.io/tags/MSSQL/"/>
    
  </entry>
  
  <entry>
    <title>使用 SSH 建立通道</title>
    <link href="https://choutinghsiao.github.io/2023/05/07/LinuxSshTunnel/"/>
    <id>https://choutinghsiao.github.io/2023/05/07/LinuxSshTunnel/</id>
    <published>2023-05-07T18:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="本機特定端口轉發至跳板機"><a href="#本機特定端口轉發至跳板機" class="headerlink" title="本機特定端口轉發至跳板機"></a>本機特定端口轉發至跳板機</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p [跳板機端口] -C -f -N -g -L [本地端口]:[遠端服務IP]:[遠端服務端口] [帳號]@[跳板機IP]</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="跳板機轉發至本機特定端口"><a href="#跳板機轉發至本機特定端口" class="headerlink" title="跳板機轉發至本機特定端口"></a>跳板機轉發至本機特定端口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p [跳板機端口] -C -g -R 0.0.0.0:[跳板機端口]:localhost:[本地端口] [帳號]@[跳板機IP]</span><br></pre></td></tr></table></figure><h2 id="請求轉發至跳板"><a href="#請求轉發至跳板" class="headerlink" title="請求轉發至跳板"></a>請求轉發至跳板</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p [跳板機端口] -D localhost:[本地端口] [帳號]@[跳板機IP]</span><br></pre></td></tr></table></figure><h2 id="ssh-執行選項說明"><a href="#ssh-執行選項說明" class="headerlink" title="ssh 執行選項說明"></a>ssh 執行選項說明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-L: 指定將本機上的特定端口轉發到遠端主機</span><br><span class="line">-R: 表示使用遠程端口轉發創建ssh隧道</span><br><span class="line">-D: port動態應用級端口轉​​發</span><br><span class="line">-p: 跳板機端口</span><br><span class="line">-C: 使用數據壓縮</span><br><span class="line">-c: cipher_spec選擇用於加密會話的密碼規範</span><br><span class="line">-f: 代表後台運行程序</span><br><span class="line">-F: configfile指定每個用戶的配置文件</span><br><span class="line">-N: 不要執行任何遠端指令</span><br><span class="line">-g: 允許遠程主機連接到本地轉發端口</span><br></pre></td></tr></table></figure><!-- /etc/ssh/sshd_config 加入GatewayPorts 設定，能讓所有人都連到 --><!-- scoop install puttyplink -v -x -a -T -C -noagent -ssh -pw "[密碼]" -P 50893 -L [本地端口]:[遠端服務IP]:[遠端服務端口] [帳號]@[跳板機IP] --><div class="note warning"><p>參考資料</p><ol><li><a href="https://www.ssh.com/academy/ssh/command">SSH Command - Usage, Options, Configuration</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;本機特定端口轉發至跳板機&quot;&gt;&lt;a href=&quot;#本機特定端口轉發至跳板機&quot; class=&quot;headerlink&quot; title=&quot;本機特定端口轉發至跳板機&quot;&gt;&lt;/a&gt;本機特定端口轉發至跳板機&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh -p [跳板機端口] -C -f -N -g -L [本地端口]:[遠端服務IP]:[遠端服務端口] [帳號]@[跳板機IP]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/tags/Linux/"/>
    
    <category term="Ubuntu" scheme="https://choutinghsiao.github.io/tags/Ubuntu/"/>
    
    <category term="Ssh" scheme="https://choutinghsiao.github.io/tags/Ssh/"/>
    
  </entry>
  
  <entry>
    <title>使用 lldb 分析 Dotnet 核心傾印檔案</title>
    <link href="https://choutinghsiao.github.io/2023/05/07/NetCoreDump/"/>
    <id>https://choutinghsiao.github.io/2023/05/07/NetCoreDump/</id>
    <published>2023-05-07T18:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="使用-apport-解壓縮核心傾印檔案"><a href="#使用-apport-解壓縮核心傾印檔案" class="headerlink" title="使用 apport 解壓縮核心傾印檔案"></a>使用 apport 解壓縮核心傾印檔案</h2><p>安裝 apport</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install apport</span><br></pre></td></tr></table></figure><p>解壓縮核心傾印檔案</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apport-unpack [systemGeneratedCrashReportPath].crash [yourNewUnpackDirectoryHere]</span><br></pre></td></tr></table></figure><span id="more"></span><!-- cd [yourNewUnpackDirectoryHere]/sudo apt install gdbgdb `cat ExecutablePath` CoreDump堆疊: bt full顯示一些特定的資訊: info中斷點: b印出程式碼: list ( l )顯示正在執行的程式:info frame 0對執行中的程式以進行除錯: attach PID在拋出的異常上設置斷點: catch throw印出變數內容: print *(long**)0x7fffffffdc98檢查點: watch *(long**)0x7fffffffdc98反向調試: reverse-stepi --><!-- export PATH="$PATH:/root/.dotnet/tools" --><!-- dotnet tool install -g dotnet-dumpdotnet-dump psdotnet-dump collect --process-id 1902 --><h2 id="安裝-Dotnet-工具"><a href="#安裝-Dotnet-工具" class="headerlink" title="安裝 Dotnet 工具"></a>安裝 Dotnet 工具</h2><p>安裝 dotnet-symbol 導出傾印檔案的符號</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet tool install -g dotnet-symbol</span><br></pre></td></tr></table></figure><p>導出傾印檔案的符號</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet-symbol ~/dumps/dotnet/CoreDump -o ~/dumps/symbols --host-only</span><br></pre></td></tr></table></figure><p>安裝 SOS 擴充偵錯工具功能</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dotnet tool install -g dotnet-sos</span><br><span class="line">dotnet-sos install</span><br></pre></td></tr></table></figure><h2 id="使用-lldb-偵錯"><a href="#使用-lldb-偵錯" class="headerlink" title="使用 lldb 偵錯"></a>使用 lldb 偵錯</h2><p>安裝 lldb</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install lldb</span><br></pre></td></tr></table></figure><p>使用 lldb 分析核心傾印檔案</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lldb --core ~/dumps/dotnet/CoreDump</span><br></pre></td></tr></table></figure><p>在 lldb 中載入導入傾印檔案的符號</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsymbolserver -directory ~/dumps/symbols</span><br></pre></td></tr></table></figure><p>在 lldb 中常用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">執行緒清單: clrthreads</span><br><span class="line">切換執行序: thread <span class="keyword">select</span> [thread]</span><br><span class="line">線程棧清單: clrstack</span><br><span class="line">所有託管堆物件: dso</span><br><span class="line">託管堆狀態: dumpheap -<span class="built_in">stat</span></span><br><span class="line">尋找託管堆的位址: dumpheap -mt [address]</span><br><span class="line">程序最近都拋了什麼異常: dumpheap -<span class="built_in">type</span> Exception</span><br><span class="line">異常狀況資訊: pe</span><br><span class="line">異常的詳細信息: pe [address]</span><br><span class="line">分析物件位置: dumpobj [address]</span><br><span class="line">分析陣列位置: dumparray [address]</span><br><span class="line">GC狀態:  eeheap -gc</span><br></pre></td></tr></table></figure><h2 id="安裝-ProcDump"><a href="#安裝-ProcDump" class="headerlink" title="安裝 ProcDump"></a>安裝 ProcDump</h2><p>當目標進程 CPU 或記憶體使用量達到特定臨界值或低於限制值時，您可以使用 ProcDump 來擷取記憶體傾印檔案。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install procdump</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://learn.microsoft.com/zh-tw/troubleshoot/developer/webapps/aspnetcore/practice-troubleshoot-linux/lab-1-1-reproduce-troubleshoot">重現損毀問題並進行疑難排解</a></li><li><a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/sos-debugging-extension">SOS debugging extension</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;使用-apport-解壓縮核心傾印檔案&quot;&gt;&lt;a href=&quot;#使用-apport-解壓縮核心傾印檔案&quot; class=&quot;headerlink&quot; title=&quot;使用 apport 解壓縮核心傾印檔案&quot;&gt;&lt;/a&gt;使用 apport 解壓縮核心傾印檔案&lt;/h2&gt;&lt;p&gt;安裝 apport&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt install apport&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;解壓縮核心傾印檔案&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apport-unpack [systemGeneratedCrashReportPath].crash [yourNewUnpackDirectoryHere]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/tags/Linux/"/>
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="lldb" scheme="https://choutinghsiao.github.io/tags/lldb/"/>
    
  </entry>
  
  <entry>
    <title>Win10 家用版安裝 Docker</title>
    <link href="https://choutinghsiao.github.io/2023/05/05/Win10HomeDocker/"/>
    <id>https://choutinghsiao.github.io/2023/05/05/Win10HomeDocker/</id>
    <published>2023-05-05T00:10:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="使用-Scoop-安裝-Docker"><a href="#使用-Scoop-安裝-Docker" class="headerlink" title="使用 Scoop 安裝 Docker"></a>使用 Scoop 安裝 Docker</h2><p>執行下方命令安裝，請注意下方 Docker 只支援 Ｗindows 的 Image</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install docker</span><br></pre></td></tr></table></figure><span id="more"></span><p>複製 Docker 資料至磁碟機 D ，節省磁碟機 C 的空間</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Copy-Item</span> <span class="string">&#x27;C:\ProgramData\docker&#x27;</span> <span class="literal">-Destination</span> <span class="string">&#x27;d:\\docker&#x27;</span></span><br></pre></td></tr></table></figure><p>建立 ‘C:\ProgramData\docker\config\daemon.json’</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;hosts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;tcp://0.0.0.0:&quot;</span> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data-root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;d:\\docker&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dns&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;8.8.8.8&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="安裝-Hyper-V-功能"><a href="#安裝-Hyper-V-功能" class="headerlink" title="安裝 Hyper-V 功能"></a>安裝 Hyper-V 功能</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 將批處理檔案所在的目錄設定為工作目錄</span></span><br><span class="line"><span class="built_in">pushd</span> <span class="string">&quot;%~dp0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 尋找符合檔案名的所有檔案名，匯出文字檔</span></span><br><span class="line"><span class="built_in">dir</span> /b %SystemRoot%\servicing\Packages\*Hyper<span class="literal">-V</span>*.mum &gt;hyper<span class="literal">-v</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入套件</span></span><br><span class="line"><span class="keyword">for</span> /f %%i <span class="keyword">in</span> (<span class="string">&#x27;findstr /i . hyper-v.txt 2^&gt;nul&#x27;</span>) <span class="keyword">do</span> dism /online /norestart /<span class="built_in">add-package</span>:<span class="string">&quot;%SystemRoot%\servicing\Packages\%%i&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移除文字檔</span></span><br><span class="line"><span class="built_in">del</span> hyper<span class="literal">-v</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安裝容器套件</span></span><br><span class="line">Dism /online /<span class="built_in">enable-feature</span> /featurename:Microsoft<span class="literal">-Hyper-V-All</span> /LimitAccess /ALL</span><br></pre></td></tr></table></figure><h2 id="安裝容器功能"><a href="#安裝容器功能" class="headerlink" title="安裝容器功能"></a>安裝容器功能</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 將批處理檔案所在的目錄設定為工作目錄</span></span><br><span class="line"><span class="built_in">pushd</span> <span class="string">&quot;%~dp0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 尋找符合檔案名的所有檔案名，匯出文字檔</span></span><br><span class="line"><span class="built_in">dir</span> /b %SystemRoot%\servicing\Packages\*container*.mum &gt;container.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入套件</span></span><br><span class="line"><span class="keyword">for</span> /f %%i <span class="keyword">in</span> (<span class="string">&#x27;findstr /i . container.txt 2^&gt;nul&#x27;</span>) <span class="keyword">do</span> dism /online /norestart /<span class="built_in">add-package</span>:<span class="string">&quot;%SystemRoot%\servicing\Packages\%%i&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移除文字檔</span></span><br><span class="line"><span class="built_in">del</span> container.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安裝容器套件</span></span><br><span class="line">Dism /online /<span class="built_in">enable-feature</span> /featurename:containers /LimitAccess /ALL</span><br></pre></td></tr></table></figure><h2 id="執行-Docker"><a href="#執行-Docker" class="headerlink" title="執行 Docker"></a>執行 Docker</h2><p>執行下方命令註冊 Ｗindows 服務</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dockerd <span class="literal">--register-service</span> ; <span class="built_in">Start-Service</span> docker ; <span class="keyword">exit</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://scoop.sh/#/apps?q=docker&s=0&d=1&o=true">Scoop Docker</a></li><li><a href="https://learn.microsoft.com/zh-tw/virtualization/windowscontainers/manage-containers/container-base-images">Windows Base Image</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;使用-Scoop-安裝-Docker&quot;&gt;&lt;a href=&quot;#使用-Scoop-安裝-Docker&quot; class=&quot;headerlink&quot; title=&quot;使用 Scoop 安裝 Docker&quot;&gt;&lt;/a&gt;使用 Scoop 安裝 Docker&lt;/h2&gt;&lt;p&gt;執行下方命令安裝，請注意下方 Docker 只支援 Ｗindows 的 Image&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scoop install docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
    <category term="docker" scheme="https://choutinghsiao.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>WSL2 移動至其它硬碟</title>
    <link href="https://choutinghsiao.github.io/2023/05/05/Wsl2Disk/"/>
    <id>https://choutinghsiao.github.io/2023/05/05/Wsl2Disk/</id>
    <published>2023-05-05T00:10:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="列出已安裝的-Linux-發行版"><a href="#列出已安裝的-Linux-發行版" class="headerlink" title="列出已安裝的 Linux 發行版"></a>列出已安裝的 Linux 發行版</h2><p>執行下方命令</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">-l</span> <span class="literal">-v</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="遷移至磁碟機-D"><a href="#遷移至磁碟機-D" class="headerlink" title="遷移至磁碟機 D"></a>遷移至磁碟機 D</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 導出已安裝的 Linux 發行版壓縮檔</span></span><br><span class="line">wsl <span class="literal">--export</span> <span class="string">&quot;Ubuntu-22.04&quot;</span> d:\ubuntu.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移除 WSL</span></span><br><span class="line">wsl <span class="literal">--unregister</span> <span class="string">&quot;Ubuntu-22.04&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立解壓縮的目錄</span></span><br><span class="line">mkdir d:\Ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># Linux 發行版壓縮檔解壓縮至新目錄後加入 WSL</span></span><br><span class="line">wsl <span class="literal">--import</span> <span class="string">&quot;Ubuntu-22.04&quot;</span> d:\ubuntu d:\ubuntu.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刪除 Linux 發行版壓縮檔</span></span><br><span class="line"><span class="built_in">del</span> d:\ubuntu.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 因重新建立 WSL 會以 root 為預設帳戶，需重新設定預設帳戶</span></span><br><span class="line">ubuntu2204.exe config <span class="literal">--default-user</span> ubuntu</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://learn.microsoft.com/zh-tw/windows/wsl/use-custom-distro">匯入任何要與 WSL 搭配使用的 Linux 發行版本</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;列出已安裝的-Linux-發行版&quot;&gt;&lt;a href=&quot;#列出已安裝的-Linux-發行版&quot; class=&quot;headerlink&quot; title=&quot;列出已安裝的 Linux 發行版&quot;&gt;&lt;/a&gt;列出已安裝的 Linux 發行版&lt;/h2&gt;&lt;p&gt;執行下方命令&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wsl &lt;span class=&quot;literal&quot;&gt;-l&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-v&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
  </entry>
  
  <entry>
    <title>WSL2 開放 Docker 外部連線</title>
    <link href="https://choutinghsiao.github.io/2023/04/29/Wsl2Docker/"/>
    <id>https://choutinghsiao.github.io/2023/04/29/Wsl2Docker/</id>
    <published>2023-04-29T21:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="開放-Docker-外部連線"><a href="#開放-Docker-外部連線" class="headerlink" title="開放 Docker 外部連線"></a>開放 Docker 外部連線</h2><p>建立 ‘&#x2F;etc&#x2F;docker&#x2F;daemon.json’</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>加入以下設定</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;hosts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;tcp://0.0.0.0:&quot;</span> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="確認-docker-連線-2375是否存在"><a href="#確認-docker-連線-2375是否存在" class="headerlink" title="確認 docker 連線 *:2375是否存在"></a>確認 docker 連線 *:2375是否存在</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -peanut</span><br></pre></td></tr></table></figure><h2 id="Chocolatey-安裝-Docker-CLI"><a href="#Chocolatey-安裝-Docker-CLI" class="headerlink" title="Chocolatey 安裝 Docker CLI"></a>Chocolatey 安裝 Docker CLI</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install docker<span class="literal">-cli</span></span><br></pre></td></tr></table></figure><h2 id="主機連線設定有兩種方式"><a href="#主機連線設定有兩種方式" class="headerlink" title="主機連線設定有兩種方式"></a>主機連線設定有兩種方式</h2><ol><li><p>設定環境變數 DOCKER_HOST</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Environment</span>]::SetEnvironmentVariable(<span class="string">&#x27;DOCKER_HOST&#x27;</span>, <span class="string">&quot;tcp://<span class="variable">$</span>(<span class="variable">$wslip</span>):2375&quot;</span>, <span class="string">&#x27;User&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>設定 docker context</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取得 WSL 的 IP 位置</span></span><br><span class="line"><span class="variable">$wslip</span> = wsl <span class="literal">--</span> ip <span class="literal">-o</span> <span class="literal">-4</span> <span class="literal">-json</span> addr list eth0 | <span class="built_in">ConvertFrom-Json</span> | %&#123; <span class="variable">$_</span>.addr_info.local &#125; ` | ?&#123; <span class="variable">$_</span> &#125;</span><br><span class="line"><span class="built_in">Write-Host</span> <span class="string">&quot;Setting Docker context &#x27;wsl&#x27; to host=tcp://<span class="variable">$</span>(<span class="variable">$wslip</span>):2375&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立 context</span></span><br><span class="line">docker context create wsl <span class="literal">--docker</span> <span class="string">&quot;host=tcp://<span class="variable">$</span>(<span class="variable">$wslip</span>):2375&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新 context</span></span><br><span class="line">docker context update wsl <span class="literal">--docker</span> <span class="string">&quot;host=tcp://<span class="variable">$</span>(<span class="variable">$wslip</span>):2375&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 context</span></span><br><span class="line">docker context use wsl</span><br><span class="line">docker <span class="literal">--context</span> wsl <span class="built_in">ps</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顯示目前設定的 context</span></span><br><span class="line">docker context <span class="built_in">ls</span> <span class="literal">--format</span>=<span class="string">&quot;&#123;&#123;json .&#125;&#125;&quot;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="Powershell-取得-WSL-的-IP-位置"><a href="#Powershell-取得-WSL-的-IP-位置" class="headerlink" title="Powershell 取得 WSL 的 IP 位置"></a>Powershell 取得 WSL 的 IP 位置</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">--</span> ip <span class="literal">-o</span> <span class="literal">-4</span> <span class="literal">-json</span> addr list eth0 `</span><br><span class="line">| <span class="built_in">ConvertFrom-Json</span> `</span><br><span class="line">| %&#123; <span class="variable">$_</span>.addr_info.local &#125; `</span><br><span class="line">| ?&#123; <span class="variable">$_</span> &#125;</span><br></pre></td></tr></table></figure><h2 id="測試-Docker-命令"><a href="#測試-Docker-命令" class="headerlink" title="測試 Docker 命令"></a>測試 Docker 命令</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="literal">-H</span> [<span class="type">YOUR_WSL_IP</span>] <span class="built_in">ps</span></span><br></pre></td></tr></table></figure><!-- sudo dockerd& --><!-- docker run --rm hello-world --><h2 id="登入-wsl-自動啟動-Docker"><a href="#登入-wsl-自動啟動-Docker" class="headerlink" title="登入 wsl 自動啟動 Docker"></a>登入 wsl 自動啟動 Docker</h2><p>修改&#x2F;etc&#x2F;profile</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/profile</span><br></pre></td></tr></table></figure><p>加入以下設定</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export DOCKER_HOST=&quot;tcp://127.0.0.1:2375&quot;</span><br><span class="line">sudo service docker start</span><br></pre></td></tr></table></figure><h2 id="無密碼-sudo-授權-不建議用在生產環境"><a href="#無密碼-sudo-授權-不建議用在生產環境" class="headerlink" title="無密碼 sudo 授權(不建議用在生產環境)"></a>無密碼 sudo 授權(不建議用在生產環境)</h2><p>修改&#x2F;etc&#x2F;sudoers</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/sudoers</span><br></pre></td></tr></table></figure><p>加入以下設定</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%ubuntu ALL=(ALL:ALL) NOPASSWD:ALL</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://community.chocolatey.org/packages/docker-cli">Daemon CLI (dockerd)</a></li><li><a href="https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file">Chocolatey Docker CLI</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;開放-Docker-外部連線&quot;&gt;&lt;a href=&quot;#開放-Docker-外部連線&quot; class=&quot;headerlink&quot; title=&quot;開放 Docker 外部連線&quot;&gt;&lt;/a&gt;開放 Docker 外部連線&lt;/h2&gt;&lt;p&gt;建立 ‘&amp;#x2F;etc&amp;#x2F;docker&amp;#x2F;daemon.json’&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo nano /etc/docker/daemon.json&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;加入以下設定&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&amp;quot;hosts&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;tcp://0.0.0.0:&amp;quot;&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&amp;quot;tls&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
    <category term="Docker" scheme="https://choutinghsiao.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>WSL2 設定固定 IP</title>
    <link href="https://choutinghsiao.github.io/2023/04/29/Wsl2Network/"/>
    <id>https://choutinghsiao.github.io/2023/04/29/Wsl2Network/</id>
    <published>2023-04-29T21:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="設定-DNS"><a href="#設定-DNS" class="headerlink" title="設定 DNS"></a>設定 DNS</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 刪除原始的 resolv.conf 設定</span></span><br><span class="line">sudo <span class="built_in">rm</span> /etc/resolv.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立 resolv.conf 設定，加入自訂 DNS</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;nameserver 192.168.50.1&quot; &gt; /etc/resolv.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入 Google 的 DNS 加速</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;nameserver 8.8.8.8&quot; &gt;&gt; /etc/resolv.conf&#x27;</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;nameserver 8.8.4.4&quot; &gt;&gt; /etc/resolv.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 設定 /etc/wsl.conf</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;[network]&quot; &gt; /etc/wsl.conf&#x27;</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;generateResolvConf = false&quot; &gt;&gt; /etc/wsl.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 鎖定 resolv.conf 設定</span></span><br><span class="line">sudo chattr +i /etc/resolv.conf</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="Powershell-設定-Ububtu-網卡"><a href="#Powershell-設定-Ububtu-網卡" class="headerlink" title="Powershell 設定 Ububtu 網卡"></a>Powershell 設定 Ububtu 網卡</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 搜尋 eth0 網卡 IP 設定</span></span><br><span class="line"><span class="variable">$ipAddr</span> = wsl <span class="literal">-u</span> root /bin/bash <span class="literal">-c</span> <span class="string">&quot;ip addr show eth0 | grep &#x27;inet\b&#x27;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$ipAddr</span> = <span class="variable">$ipAddr</span>.Trim().Split(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 確認是否為自訂的網卡設定</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$ipAddr</span>.Contains(<span class="string">&quot;192.168.50.2&quot;</span>))&#123;</span><br><span class="line">  <span class="comment"># 移除 Ububtu 網卡設定</span></span><br><span class="line">  wsl <span class="literal">-u</span> root /bin/bash <span class="literal">-c</span> <span class="string">&quot;ip addr del <span class="variable">$ipAddr</span> dev eth0&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 加入自訂的網卡</span></span><br><span class="line">  wsl <span class="literal">-u</span> root /bin/bash <span class="literal">-c</span> <span class="string">&quot;ip addr add 192.168.50.2/24 broadcast 192.168.50.255 dev eth0&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 加入自訂的路由</span></span><br><span class="line">  wsl <span class="literal">-u</span> root /bin/bash <span class="literal">-c</span> <span class="string">&quot;ip route add 0.0.0.0/0 via 192.168.50.1 dev eth0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- sudo ip addr del $(ip addr show eth0 | grep 'inet\b' | awk '{print $2}' | head -n 1) dev eth0 --><!-- sudo ip addr add 192.168.50.2/24 broadcast 192.168.50.255 dev eth0 --><!-- sudo ip route add 0.0.0.0/0 via 192.168.50.1 dev eth0 --><h2 id="Powershell-設定-vEthernet-WSL"><a href="#Powershell-設定-vEthernet-WSL" class="headerlink" title="Powershell 設定 vEthernet (WSL)"></a>Powershell 設定 vEthernet (WSL)</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 確認是否為自訂的 vEthernet (WSL) 設定</span></span><br><span class="line"><span class="keyword">if</span>(!(<span class="built_in">Get-NetAdapter</span> <span class="string">&#x27;vEthernet (WSL)&#x27;</span> | <span class="built_in">Get-NetIPAddress</span>).IPAddress.Contains(<span class="string">&#x27;192.168.50.1&#x27;</span>))&#123;</span><br><span class="line">  <span class="comment"># 移除 vEthernet (WSL)設定</span></span><br><span class="line">  <span class="built_in">Get-NetAdapter</span> <span class="string">&#x27;vEthernet (WSL)&#x27;</span> | <span class="built_in">Get-NetIPAddress</span> | <span class="built_in">Remove-NetIPAddress</span> <span class="literal">-Confirm</span>:<span class="variable">$False</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 加入自訂的 vEthernet (WSL)</span></span><br><span class="line">  <span class="built_in">New-NetIPAddress</span> <span class="literal">-IPAddress</span> <span class="number">192.168</span>.<span class="number">50.1</span> <span class="literal">-PrefixLength</span> <span class="number">24</span> <span class="literal">-InterfaceAlias</span> <span class="string">&#x27;vEthernet (WSL)&#x27;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 移除 WSLNat 設定</span></span><br><span class="line">  <span class="built_in">Get-NetNat</span> | ? Name <span class="operator">-Eq</span> WSLNat | <span class="built_in">Remove-NetNat</span> <span class="literal">-Confirm</span>:<span class="variable">$False</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 加入自訂的 WSLNat</span></span><br><span class="line">  <span class="built_in">New-NetNat</span> <span class="literal">-Name</span> WSLNat <span class="literal">-InternalIPInterfaceAddressPrefix</span> <span class="number">192.168</span>.<span class="number">50.0</span>/<span class="number">24</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://zhuanlan.zhihu.com/p/380779630">知乎-給 WSL2 設置靜態IP地址</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;設定-DNS&quot;&gt;&lt;a href=&quot;#設定-DNS&quot; class=&quot;headerlink&quot; title=&quot;設定 DNS&quot;&gt;&lt;/a&gt;設定 DNS&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 刪除原始的 resolv.conf 設定&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo &lt;span class=&quot;built_in&quot;&gt;rm&lt;/span&gt; /etc/resolv.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 建立 resolv.conf 設定，加入自訂 DNS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;nameserver 192.168.50.1&amp;quot; &amp;gt; /etc/resolv.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 加入 Google 的 DNS 加速&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;nameserver 8.8.8.8&amp;quot; &amp;gt;&amp;gt; /etc/resolv.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;nameserver 8.8.4.4&amp;quot; &amp;gt;&amp;gt; /etc/resolv.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 設定 /etc/wsl.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;[network]&amp;quot; &amp;gt; /etc/wsl.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;generateResolvConf = false&amp;quot; &amp;gt;&amp;gt; /etc/wsl.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 鎖定 resolv.conf 設定&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo chattr +i /etc/resolv.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
  </entry>
  
  <entry>
    <title>Http 的 Get 方法傳入 List 參數</title>
    <link href="https://choutinghsiao.github.io/2023/01/21/NetHttpGetWithList/"/>
    <id>https://choutinghsiao.github.io/2023/01/21/NetHttpGetWithList/</id>
    <published>2023-01-21T18:10:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="建立類別"><a href="#建立類別" class="headerlink" title="建立類別"></a>建立類別</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span> &#123;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="建立-HttpGet-方法"><a href="#建立-HttpGet-方法" class="headerlink" title="建立 HttpGet 方法"></a>建立 HttpGet 方法</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">ApiController</span>]</span><br><span class="line">[<span class="meta">Route(<span class="string">&quot;[controller]&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserController</span> : <span class="title">ControllerBase</span></span><br><span class="line">&#123;</span><br><span class="line">  [<span class="meta">HttpGet</span>]</span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">Get</span>(<span class="params">[FromQuery] List&lt;User&gt; user</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">return</span> user;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="組合-Request-的-Url"><a href="#組合-Request-的-Url" class="headerlink" title="組合 Request 的 Url"></a>組合 Request 的 Url</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://example.com/User?user[0].Name=&#x27;張三&#x27;&amp;user[0].Age=10&amp;user[1].Name=&#x27;李四&#x27;&amp;user[1].Age=20</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.memoryconfigurationbuilderextensions.addinmemorycollection?view=dotnet-plat-ext-7.0">MemoryConfigurationBuilderExtensions.AddInMemoryCollection Method</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;建立類別&quot;&gt;&lt;a href=&quot;#建立類別&quot; class=&quot;headerlink&quot; title=&quot;建立類別&quot;&gt;&lt;/a&gt;建立類別&lt;/h2&gt;&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; Name &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; Age &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
  </entry>
  
  <entry>
    <title>使用 AddInMemoryCollection 設定 Configuration</title>
    <link href="https://choutinghsiao.github.io/2023/01/21/NetAddInMemoryCollection/"/>
    <id>https://choutinghsiao.github.io/2023/01/21/NetAddInMemoryCollection/</id>
    <published>2023-01-21T18:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="appsettings-json-設定如下"><a href="#appsettings-json-設定如下" class="headerlink" title="appsettings.json 設定如下"></a>appsettings.json 設定如下</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Logging&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;LogLevel&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Information&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Microsoft.AspNetCore&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Warning&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="轉換為-Dictionary-lt-string-string-gt"><a href="#轉換為-Dictionary-lt-string-string-gt" class="headerlink" title="轉換為 Dictionary&lt;string, string&gt;"></a>轉換為 Dictionary&lt;string, string&gt;</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; inMemorySettings = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; &#123;</span><br><span class="line">    &#123;<span class="string">&quot;Logging:LogLevel:Default&quot;</span>,  <span class="string">&quot;Information&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Logging:LogLevel:Microsoft.AspNetCore&quot;</span>,  <span class="string">&quot;Warning&quot;</span>&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="建立-Configuration"><a href="#建立-Configuration" class="headerlink" title="建立 Configuration"></a>建立 Configuration</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IConfiguration configuration = <span class="keyword">new</span> ConfigurationBuilder()</span><br><span class="line">            .AddInMemoryCollection(inMemorySettings)</span><br><span class="line">            .Build();</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.memoryconfigurationbuilderextensions.addinmemorycollection?view=dotnet-plat-ext-7.0">MemoryConfigurationBuilderExtensions.AddInMemoryCollection Method</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;appsettings-json-設定如下&quot;&gt;&lt;a href=&quot;#appsettings-json-設定如下&quot; class=&quot;headerlink&quot; title=&quot;appsettings.json 設定如下&quot;&gt;&lt;/a&gt;appsettings.json 設定如下&lt;/h2&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&amp;quot;Logging&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;LogLevel&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;attr&quot;&gt;&amp;quot;Default&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;Information&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;attr&quot;&gt;&amp;quot;Microsoft.AspNetCore&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;Warning&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="IConfiguration" scheme="https://choutinghsiao.github.io/tags/IConfiguration/"/>
    
  </entry>
  
  <entry>
    <title>Whistle 代理規則使用</title>
    <link href="https://choutinghsiao.github.io/2023/01/20/WhistleProxyRule/"/>
    <id>https://choutinghsiao.github.io/2023/01/20/WhistleProxyRule/</id>
    <published>2023-01-20T16:10:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="Dns-代理設定"><a href="#Dns-代理設定" class="headerlink" title="Dns 代理設定"></a>Dns 代理設定</h2><ul><li>在 Rules 頁籤加入以下設定，設定 Domain 對應 Ip 位置  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">example.<span class="attribute">com</span> <span class="number">192.168.0.1</span></span><br></pre></td></tr></table></figure></li></ul><span id="more"></span><h2 id="Http-的-StatusCode-代理設定"><a href="#Http-的-StatusCode-代理設定" class="headerlink" title="Http 的 StatusCode 代理設定"></a>Http 的 StatusCode 代理設定</h2><ul><li>在 Rules 頁籤加入以下設定，設定狀態碼  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^https://example.com/User/<span class="attribute">Get</span> statusCode://200</span><br></pre></td></tr></table></figure></li></ul><h2 id="Http-的-Headers-代理設定"><a href="#Http-的-Headers-代理設定" class="headerlink" title="Http 的 Headers 代理設定"></a>Http 的 Headers 代理設定</h2><ul><li><p>在 Values 頁籤加入以下設定，命名為 corsheaders</p>  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line">Content-Type: application/json; charset=utf8</span><br></pre></td></tr></table></figure></li><li><p>在 Rules 頁籤加入以下設定，設定 Headers</p>  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^https://example.com/User/<span class="attribute">Get</span> resHeaders://&#123;corsheaders&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="Http-的-Body-代理設定"><a href="#Http-的-Body-代理設定" class="headerlink" title="Http 的 Body 代理設定"></a>Http 的 Body 代理設定</h2><ul><li><p>在 Values 頁籤加入以下設定，命名為 User.json</p>  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;張三&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Age&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>在 Rules 頁籤加入以下設定，設定 Headers</p>  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^https://example.com/User/<span class="attribute">Get</span> resBody://&#123;User.json&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="網頁嵌入-Js-檔案代理設定"><a href="#網頁嵌入-Js-檔案代理設定" class="headerlink" title="網頁嵌入 Js 檔案代理設定"></a>網頁嵌入 Js 檔案代理設定</h2><ul><li><p>在 Values 頁籤加入以下設定，命名為 test.js</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>在 Rules 頁籤加入以下設定，設定 Js 檔案</p>  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^https://example.com/index.<span class="attribute">html</span> jsAppend://&#123;test.js&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="Socks-代理設定"><a href="#Socks-代理設定" class="headerlink" title="Socks 代理設定"></a>Socks 代理設定</h2><ul><li>在 Rules 頁籤加入以下設定，設定 Domain 對應 Ip 位置  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">example.<span class="attribute">com</span> socks://127.0.0.1:8080</span><br></pre></td></tr></table></figure></li></ul><div class="note warning"><p>參考資料</p><ol><li><a href="https://wproxy.org/whistle/">whistle</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;Dns-代理設定&quot;&gt;&lt;a href=&quot;#Dns-代理設定&quot; class=&quot;headerlink&quot; title=&quot;Dns 代理設定&quot;&gt;&lt;/a&gt;Dns 代理設定&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;在 Rules 頁籤加入以下設定，設定 Domain 對應 Ip 位置  &lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;example.&lt;span class=&quot;attribute&quot;&gt;com&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;192.168.0.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Whistle" scheme="https://choutinghsiao.github.io/categories/Whistle/"/>
    
    
    <category term="Whistle" scheme="https://choutinghsiao.github.io/tags/Whistle/"/>
    
  </entry>
  
  <entry>
    <title>安裝 Whistle</title>
    <link href="https://choutinghsiao.github.io/2023/01/20/WhistleProxyInstall/"/>
    <id>https://choutinghsiao.github.io/2023/01/20/WhistleProxyInstall/</id>
    <published>2023-01-20T16:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="使用-Node-安裝-Whistle"><a href="#使用-Node-安裝-Whistle" class="headerlink" title="使用 Node 安裝 Whistle"></a>使用 Node 安裝 Whistle</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g whistle</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="啟動-Whistle"><a href="#啟動-Whistle" class="headerlink" title="啟動 Whistle"></a>啟動 Whistle</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w2 start</span><br></pre></td></tr></table></figure><h2 id="查看-Whistle-狀態"><a href="#查看-Whistle-狀態" class="headerlink" title="查看 Whistle 狀態"></a>查看 Whistle 狀態</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w2 status</span><br></pre></td></tr></table></figure><h2 id="停止-Whistle"><a href="#停止-Whistle" class="headerlink" title="停止 Whistle"></a>停止 Whistle</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w2 stop</span><br></pre></td></tr></table></figure><h2 id="設定-Whistle-為-Proxy-的-Server"><a href="#設定-Whistle-為-Proxy-的-Server" class="headerlink" title="設定 Whistle 為 Proxy 的 Server"></a>設定 Whistle 為 Proxy 的 Server</h2><p><img src="/Win10ProxySetting.png" alt="Win10ProxySetting"></p><div class="note warning"><p>參考資料</p><ol><li><a href="https://www.npmjs.com/package/whistle">whistle npm</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;使用-Node-安裝-Whistle&quot;&gt;&lt;a href=&quot;#使用-Node-安裝-Whistle&quot; class=&quot;headerlink&quot; title=&quot;使用 Node 安裝 Whistle&quot;&gt;&lt;/a&gt;使用 Node 安裝 Whistle&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm i -g whistle&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Whistle" scheme="https://choutinghsiao.github.io/categories/Whistle/"/>
    
    
    <category term="Whistle" scheme="https://choutinghsiao.github.io/tags/Whistle/"/>
    
  </entry>
  
  <entry>
    <title>如何使用 Regex 群組</title>
    <link href="https://choutinghsiao.github.io/2022/05/22/JsRegexGroup/"/>
    <id>https://choutinghsiao.github.io/2022/05/22/JsRegexGroup/</id>
    <published>2022-05-22T14:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建立規則</span></span><br><span class="line"><span class="keyword">var</span> myRegexp = <span class="regexp">/(?&lt;群組名稱&gt;.*)Test/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 執行規則</span></span><br><span class="line"><span class="keyword">var</span> match =  myRegexp.<span class="title function_">exec</span>(<span class="string">&#x27;123Test&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取得執行結果 output: 123</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(match.<span class="property">groups</span>.群組名稱);</span><br></pre></td></tr></table></figure><span id="more"></span><div class="note warning"><p>參考資料</p><ol><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges">MDN</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 建立規則&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myRegexp = &lt;span class=&quot;regexp&quot;&gt;/(?&amp;lt;群組名稱&amp;gt;.*)Test/g&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 執行規則&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; match =  myRegexp.&lt;span class=&quot;title function_&quot;&gt;exec&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;123Test&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 取得執行結果 output: 123&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(match.&lt;span class=&quot;property&quot;&gt;groups&lt;/span&gt;.群組名稱);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Javascript" scheme="https://choutinghsiao.github.io/categories/Javascript/"/>
    
    
    <category term="Javascript" scheme="https://choutinghsiao.github.io/tags/Javascript/"/>
    
    <category term="Regex" scheme="https://choutinghsiao.github.io/tags/Regex/"/>
    
  </entry>
  
  <entry>
    <title>依字元內碼轉換 Big5 與 Unicode</title>
    <link href="https://choutinghsiao.github.io/2022/05/22/NetBig5AndUnicode/"/>
    <id>https://choutinghsiao.github.io/2022/05/22/NetBig5AndUnicode/</id>
    <published>2022-05-22T14:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><p>Big5依傳入內碼轉成字元</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建立兩位元陣列</span></span><br><span class="line"><span class="built_in">byte</span>[] codeBytes = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 欲轉換內碼前兩字轉為16進制</span></span><br><span class="line">codeBytes[<span class="number">0</span>] = (<span class="built_in">byte</span>)Convert.ToInt32(<span class="string">&quot;欲轉換內碼&quot;</span>.Substring(<span class="number">0</span>, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 欲轉換內碼後兩字轉為16進制</span></span><br><span class="line">codeBytes[<span class="number">1</span>] = (<span class="built_in">byte</span>)Convert.ToInt32(<span class="string">&quot;欲轉換內碼&quot;</span>.Substring(<span class="number">2</span>, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 轉成字元</span></span><br><span class="line">Encoding big5 = Encoding.GetEncoding(<span class="number">950</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> result = big5.GetString(bytes);</span><br></pre></td></tr></table></figure><span id="more"></span><p>Unicode依傳入內碼轉成字元，與Big5轉換的方法雷同，只需調整內碼放置的順序</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建立兩位元陣列</span></span><br><span class="line"><span class="built_in">byte</span>[] bytes = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 欲轉換內碼後兩字轉為16進制</span></span><br><span class="line">bytes[<span class="number">0</span>] = Convert.ToByte(text.Substring(<span class="number">2</span>, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 欲轉換內碼前兩字轉為16進制</span></span><br><span class="line">bytes[<span class="number">1</span>] = Convert.ToByte(text.Substring(<span class="number">0</span>, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 轉成字元</span></span><br><span class="line">Encoding unicode= Encoding.Unicode;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> result = unicode.GetString(bytes);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;p&gt;Big5依傳入內碼轉成字元&lt;/p&gt;
&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 建立兩位元陣列&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;byte&lt;/span&gt;[] codeBytes = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;byte&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 欲轉換內碼前兩字轉為16進制&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;codeBytes[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] = (&lt;span class=&quot;built_in&quot;&gt;byte&lt;/span&gt;)Convert.ToInt32(&lt;span class=&quot;string&quot;&gt;&amp;quot;欲轉換內碼&amp;quot;&lt;/span&gt;.Substring(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;), &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 欲轉換內碼後兩字轉為16進制&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;codeBytes[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = (&lt;span class=&quot;built_in&quot;&gt;byte&lt;/span&gt;)Convert.ToInt32(&lt;span class=&quot;string&quot;&gt;&amp;quot;欲轉換內碼&amp;quot;&lt;/span&gt;.Substring(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;), &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 轉成字元&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Encoding big5 = Encoding.GetEncoding(&lt;span class=&quot;number&quot;&gt;950&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; result = big5.GetString(bytes);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/tags/Linux/"/>
    
    <category term="Font" scheme="https://choutinghsiao.github.io/tags/Font/"/>
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="Big5" scheme="https://choutinghsiao.github.io/tags/Big5/"/>
    
    <category term="Unicode" scheme="https://choutinghsiao.github.io/tags/Unicode/"/>
    
  </entry>
  
  <entry>
    <title>如何在商業邏輯層進行單元測試</title>
    <link href="https://choutinghsiao.github.io/2022/05/01/NetServiceUnitTest/"/>
    <id>https://choutinghsiao.github.io/2022/05/01/NetServiceUnitTest/</id>
    <published>2022-05-01T13:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><p>安裝 Nuget 的 Moq 套件</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Package</span> Moq</span><br></pre></td></tr></table></figure><span id="more"></span><p>建立 Repository 的模擬物件</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Mock&lt;Repository&gt; mockRepository = <span class="keyword">new</span> Mock&lt;Repository&gt;();</span><br><span class="line"></span><br><span class="line">mockRepository</span><br><span class="line">.Setup(x=&gt; x.GetData(It.IsAny&lt;<span class="built_in">string</span>&gt;()))</span><br><span class="line">.Returns(<span class="keyword">new</span> Table &#123;</span><br><span class="line">    Id = <span class="number">1</span>,</span><br><span class="line">    Name = <span class="string">&quot;張三&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>把 Repository 的模擬物件注入 Service</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Service service = <span class="keyword">new</span> Service(mockRepository.Object);</span><br></pre></td></tr></table></figure><p>使用 Service</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Table result = service.RunLogic();</span><br><span class="line"></span><br><span class="line">Assert.That(result.Name, Is.EqualTo(<span class="string">&quot;張三&quot;</span>));</span><br></pre></td></tr></table></figure><p>依傳入參數做回傳</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mockRepository</span><br><span class="line">.Setup(x=&gt; x.GetData(<span class="string">&quot;張三&quot;</span>))</span><br><span class="line">.Returns(<span class="keyword">new</span> Table &#123;</span><br><span class="line">    Id = <span class="number">1</span>,</span><br><span class="line">    Name = <span class="string">&quot;張三&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mockRepository</span><br><span class="line">.Setup(x=&gt; x.GetData(<span class="string">&quot;李四&quot;</span>))</span><br><span class="line">.Returns(<span class="keyword">new</span> Table &#123;</span><br><span class="line">    Id = <span class="number">2</span>,</span><br><span class="line">    Name = <span class="string">&quot;李四&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>模擬呼叫方法多次依序回傳不同內容，可用 SetupSequence 做設定</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mockRepository</span><br><span class="line">.SetupSequence(x=&gt; x.GetData(It.IsAny&lt;<span class="built_in">string</span>&gt;()))</span><br><span class="line">.Returns(<span class="keyword">new</span> Table &#123;</span><br><span class="line">    Id = <span class="number">1</span>,</span><br><span class="line">    Name = <span class="string">&quot;張三&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line">.Returns(<span class="keyword">new</span> Table &#123;</span><br><span class="line">    Id = <span class="number">2</span>,</span><br><span class="line">    Name = <span class="string">&quot;李四&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://github.com/Moq/moq4/wiki/Quickstart#customizing-mock-behavior">Moq文件</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;p&gt;安裝 Nuget 的 Moq 套件&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Install-Package&lt;/span&gt; Moq&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="UnitTest" scheme="https://choutinghsiao.github.io/tags/UnitTest/"/>
    
    <category term="Moq" scheme="https://choutinghsiao.github.io/tags/Moq/"/>
    
  </entry>
  
  <entry>
    <title>如何在資料存取層進行單元測試</title>
    <link href="https://choutinghsiao.github.io/2022/05/01/NetRepositoryUnitTest/"/>
    <id>https://choutinghsiao.github.io/2022/05/01/NetRepositoryUnitTest/</id>
    <published>2022-05-01T12:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><p>安裝 Nuget 的 Sqlite 套件</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Package</span> Microsoft.EntityFrameworkCore.Sqlite</span><br></pre></td></tr></table></figure><span id="more"></span><p>建立 EntityFramework 的 DbContext</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestDbContext</span> : <span class="title">DbContext</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DbSet</span>&lt;<span class="title">Table</span>&gt;? Table</span> &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDbContext</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDbContext</span>(<span class="params">DbContextOptions options</span>) : <span class="title">base</span>(<span class="params">options</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnModelCreating</span>(<span class="params">ModelBuilder modelBuilder</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        modelBuilder.Entity&lt;Table&gt;(entity =&gt; &#123;</span><br><span class="line">            entity.HasKey(x =&gt; x.Id);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用 Sqlite 的 In-Memory 模式載入 DbContext</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SqliteConnection connection = <span class="keyword">new</span> SqliteConnection(<span class="string">&quot;Data Source=:memory:&quot;</span>);</span><br><span class="line"></span><br><span class="line">connection.Open();</span><br><span class="line"></span><br><span class="line">DbContextOptions options = <span class="keyword">new</span> DbContextOptionsBuilder()</span><br><span class="line">.UseSqlite(connection)</span><br><span class="line">.Options;</span><br></pre></td></tr></table></figure><p>然後使用 DbContext 的設定建立資料庫</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> TestDbContext context = <span class="keyword">new</span> TestDbContext(options);</span><br><span class="line">context.Database.EnsureCreated();</span><br></pre></td></tr></table></figure><p>最後可開始使用 EntityFramework 開始操作資料庫</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> TestDbContext context = <span class="keyword">new</span> TestDbContext(options);</span><br><span class="line">List&lt;Table&gt; table = context.Table.ToList();</span><br></pre></td></tr></table></figure><p>如果有使用 Sqlite 未定義的 Database Function , 可在程式中使用 CreateFunction 定義</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SqliteConnection connection = <span class="keyword">new</span> SqliteConnection(<span class="string">&quot;Data Source=:memory:&quot;</span>);</span><br><span class="line"></span><br><span class="line">connection.CreateFunction(<span class="string">&quot;current_date&quot;</span>, (x) =&gt; DateTime.Now);</span><br><span class="line"></span><br><span class="line">connection.Open();</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.data.sqlite.sqliteconnection.createfunction?view=msdata-sqlite-6.0.0">Microsoft文件</a></li><li><a href="https://csharp.hotexamples.com/examples/-/SQLiteConnection/CreateFunction/php-sqliteconnection-createfunction-method-examples.html">SQLite Examples</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;p&gt;安裝 Nuget 的 Sqlite 套件&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Install-Package&lt;/span&gt; Microsoft.EntityFrameworkCore.Sqlite&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="UnitTest" scheme="https://choutinghsiao.github.io/tags/UnitTest/"/>
    
    <category term="SQLite" scheme="https://choutinghsiao.github.io/tags/SQLite/"/>
    
  </entry>
  
  <entry>
    <title>FontForge 使用 Python Script 進行字型檔轉換</title>
    <link href="https://choutinghsiao.github.io/2021/10/23/FontForgePythonTransfer/"/>
    <id>https://choutinghsiao.github.io/2021/10/23/FontForgePythonTransfer/</id>
    <published>2021-10-23T17:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><p>建立 font.py 檔案</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># 載入 FontForge 模組</span></span><br><span class="line"><span class="keyword">import</span> fontforge</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定義 main 函數</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"><span class="comment"># 載入參數</span></span><br><span class="line">fontFilePath = sys.argv[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 開啟字型檔</span></span><br><span class="line">originFile=fontforge.<span class="built_in">open</span>(fontFilePath)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 選取 unicode 特定範圍的字型</span></span><br><span class="line">originFile.selection.select((<span class="string">&quot;ranges&quot;</span>, <span class="string">&quot;unicode&quot;</span>), <span class="number">0xe000</span>, <span class="number">0xf8ff</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 複製字型至剪貼簿</span></span><br><span class="line">originFile.copy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立新的字型檔</span></span><br><span class="line">newFile=fontforge.font()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 設定 sfnt_names 參數與原檔一致</span></span><br><span class="line">newFile.sfnt_names = originFile.sfnt_names</span><br><span class="line"></span><br><span class="line"><span class="comment"># 設定 encoding 參數與原檔一致</span></span><br><span class="line">newFile.encoding = originFile.encoding</span><br><span class="line"></span><br><span class="line"><span class="comment"># 設定 size 參數與原檔一致</span></span><br><span class="line">newFile.em = originFile.em</span><br><span class="line"></span><br><span class="line"><span class="comment"># 設定 layers 參數與原檔一致</span></span><br><span class="line">newFile.layers[<span class="string">&#x27;Fore&#x27;</span>].is_quadratic = originFile.layers[<span class="string">&#x27;Fore&#x27;</span>].is_quadratic</span><br><span class="line"></span><br><span class="line"><span class="comment"># 選取 unicode 特定範圍的字型</span></span><br><span class="line">newFile.selection.select((<span class="string">&quot;ranges&quot;</span>, <span class="string">&quot;unicode&quot;</span>), <span class="number">0xe000</span>, <span class="number">0xf8ff</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 貼上剪貼簿內容</span></span><br><span class="line">newFile.paste()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 設定字型名稱</span></span><br><span class="line">newFile.fontname=<span class="string">&quot;EUDC&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存為woff字型</span></span><br><span class="line">newFile.generate(<span class="string">&quot;EUDC.woff&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 關閉字型檔</span></span><br><span class="line">originFile.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 執行 main 函數</span></span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>使用 FontForge 執行 Python Script</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fontforge -script font.py [FontFilePath]</span><br></pre></td></tr></table></figure><div class="note warning"><p>參考資料</p><ol><li><a href="https://fontforge.org/docs/scripting/python.html">Python Scripting</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;p&gt;建立 font.py 檔案&lt;/p&gt;</summary>
    
    
    
    <category term="FontForge" scheme="https://choutinghsiao.github.io/categories/FontForge/"/>
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/tags/Python/"/>
    
    <category term="Font" scheme="https://choutinghsiao.github.io/tags/Font/"/>
    
    <category term="Woff" scheme="https://choutinghsiao.github.io/tags/Woff/"/>
    
  </entry>
  
  <entry>
    <title>使用 Linux 檔案列表建立 Jenkins 下拉選單</title>
    <link href="https://choutinghsiao.github.io/2021/10/23/JenkinsFileDropdown/"/>
    <id>https://choutinghsiao.github.io/2021/10/23/JenkinsFileDropdown/</id>
    <published>2021-10-23T16:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="取得檔案列表方法"><a href="#取得檔案列表方法" class="headerlink" title="取得檔案列表方法"></a>取得檔案列表方法</h2><p>使用以下 Linxu 指令，將預設目錄每個檔案使用一列的方式逐一列出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -1 /home/ubuntu</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="建立-Jenkins-Pipeline"><a href="#建立-Jenkins-Pipeline" class="headerlink" title="建立 Jenkins Pipeline"></a>建立 Jenkins Pipeline</h2><p>在 Pipeline 執行 Linxu 指令，把結果存入變數</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> fileInFolder = sh(<span class="attr">script:</span> <span class="string">&quot;ls -1 /home/ubuntu&quot;</span>, <span class="attr">returnStdout:</span> <span class="literal">true</span>).trim();</span><br></pre></td></tr></table></figure><p>在 Pipeline 定義 Dialog ，把 parameters -&gt; choice -&gt; choices 定義替換為上方變數 fileInFolder</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> dialogMessage = <span class="string">&quot;Release $&#123;JOB_NAME&#125; now?&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> confirmDialog =</span><br><span class="line">    input <span class="attr">message:</span> dialogMessage,</span><br><span class="line">    <span class="symbol">parameters:</span> [choice(<span class="attr">name:</span> <span class="string">&#x27;action&#x27;</span>, <span class="attr">choices:</span> fileInFolder, <span class="attr">description:</span> <span class="string">&#x27;&#x27;</span>)],</span><br><span class="line">    <span class="symbol">submitterParameter:</span> <span class="string">&#x27;releaseApprover&#x27;</span></span><br></pre></td></tr></table></figure><p>取得用戶選取參數，使用變數 confirmDialog -&gt; parameters -&gt; choice -&gt; name的定義</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">confirmDialog.action</span><br></pre></td></tr></table></figure><p>取得點擊確認的用戶，使用變數 confirmDialog -&gt; submitterParameter的定義</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">confirmDialog.releaseApprover</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;取得檔案列表方法&quot;&gt;&lt;a href=&quot;#取得檔案列表方法&quot; class=&quot;headerlink&quot; title=&quot;取得檔案列表方法&quot;&gt;&lt;/a&gt;取得檔案列表方法&lt;/h2&gt;&lt;p&gt;使用以下 Linxu 指令，將預設目錄每個檔案使用一列的方式逐一列出&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;ls&lt;/span&gt; -1 /home/ubuntu&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://choutinghsiao.github.io/categories/Jenkins/"/>
    
    
    <category term="Jenkins" scheme="https://choutinghsiao.github.io/tags/Jenkins/"/>
    
  </entry>
  
  <entry>
    <title>Linux IBM i Access Odbc 手動安裝</title>
    <link href="https://choutinghsiao.github.io/2021/10/05/LinuxIbmIAccessOdbc/"/>
    <id>https://choutinghsiao.github.io/2021/10/05/LinuxIbmIAccessOdbc/</id>
    <published>2021-10-05T22:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="Odbc-元件配置"><a href="#Odbc-元件配置" class="headerlink" title="Odbc 元件配置"></a>Odbc 元件配置</h2><p>安裝 Linux Odbc 元件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install unixodbc</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="Odbc-Driver-安裝"><a href="#Odbc-Driver-安裝" class="headerlink" title="Odbc Driver 安裝"></a>Odbc Driver 安裝</h2><p>登入<a href="https://www.ibm.com/support/pages/ibm-i-access-client-solutions">IBM網頁</a>下載Linux Odbc Driver並安裝</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i ibm-iaccess-1.1.0.15-1.0.amd64.deb</span><br></pre></td></tr></table></figure><p>查看 Linux Odbc Drivers 設定檔位置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">odbcinst -j</span><br></pre></td></tr></table></figure><p>查看設定檔是否出現 IBM i Access ODBC Driver 的設定</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/odbcinst.ini</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;Odbc-元件配置&quot;&gt;&lt;a href=&quot;#Odbc-元件配置&quot; class=&quot;headerlink&quot; title=&quot;Odbc 元件配置&quot;&gt;&lt;/a&gt;Odbc 元件配置&lt;/h2&gt;&lt;p&gt;安裝 Linux Odbc 元件&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install unixodbc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/tags/Linux/"/>
    
    <category term="Ubuntu" scheme="https://choutinghsiao.github.io/tags/Ubuntu/"/>
    
    <category term="Odbc" scheme="https://choutinghsiao.github.io/tags/Odbc/"/>
    
    <category term="IBM i Access" scheme="https://choutinghsiao.github.io/tags/IBM-i-Access/"/>
    
  </entry>
  
  <entry>
    <title>Linux Mssql Odbc 手動安裝</title>
    <link href="https://choutinghsiao.github.io/2021/10/05/LinuxMssqlOdbc/"/>
    <id>https://choutinghsiao.github.io/2021/10/05/LinuxMssqlOdbc/</id>
    <published>2021-10-05T22:00:00.000Z</published>
    <updated>2023-07-27T14:15:29.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h1><h2 id="Linux-Odbc-元件配置"><a href="#Linux-Odbc-元件配置" class="headerlink" title="Linux Odbc 元件配置"></a>Linux Odbc 元件配置</h2><p>安裝 Linux Odbc 元件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install unixodbc</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="Odbc-Driver-安裝"><a href="#Odbc-Driver-安裝" class="headerlink" title="Odbc Driver 安裝"></a>Odbc Driver 安裝</h2><p>登入<a href="https://docs.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server?view=sql-server-ver15">Microsoft網頁</a>下載Odbc Driver並安裝</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i msodbcsql17_17.8.1.1-1_amd64.deb</span><br></pre></td></tr></table></figure><p>查看 Linux Odbc Drivers 設定檔位置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">odbcinst -j</span><br></pre></td></tr></table></figure><p>查看設定檔是否出現 ODBC Driver 17 for SQL Server 的設定</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/odbcinst.ini</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;實作&quot;&gt;&lt;a href=&quot;#實作&quot; class=&quot;headerlink&quot; title=&quot;實作&quot;&gt;&lt;/a&gt;實作&lt;/h1&gt;&lt;h2 id=&quot;Linux-Odbc-元件配置&quot;&gt;&lt;a href=&quot;#Linux-Odbc-元件配置&quot; class=&quot;headerlink&quot; title=&quot;Linux Odbc 元件配置&quot;&gt;&lt;/a&gt;Linux Odbc 元件配置&lt;/h2&gt;&lt;p&gt;安裝 Linux Odbc 元件&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install unixodbc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/tags/Linux/"/>
    
    <category term="Ubuntu" scheme="https://choutinghsiao.github.io/tags/Ubuntu/"/>
    
    <category term="Odbc" scheme="https://choutinghsiao.github.io/tags/Odbc/"/>
    
    <category term="Mssql" scheme="https://choutinghsiao.github.io/tags/Mssql/"/>
    
  </entry>
  
</feed>
