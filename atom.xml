<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Stephen&#39;s Note</title>
  
  
  <link href="https://choutinghsiao.github.io/atom.xml" rel="self"/>
  
  <link href="https://choutinghsiao.github.io/"/>
  <updated>2024-02-04T13:46:50.178Z</updated>
  <id>https://choutinghsiao.github.io/</id>
  
  <author>
    <name>Stephen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¦‚ä½•è§£æ XML è³‡æ–™</title>
    <link href="https://choutinghsiao.github.io/2024/02/04/NetXmlParse/"/>
    <id>https://choutinghsiao.github.io/2024/02/04/NetXmlParse/</id>
    <published>2024-02-04T18:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="XML-è³‡æ–™"><a class="header-anchor" href="#XML-è³‡æ–™"></a>XML è³‡æ–™</h1><p>å®£å‘Š XML æ ¼å¼å­—ä¸²</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> doc = <span class="string">@&quot;&lt;properties&gt;</span></span><br><span class="line"><span class="string">&lt;property key=&#x27;name&#x27;&gt;Test&lt;/property&gt;</span></span><br><span class="line"><span class="string">&lt;property key=&#x27;age&#x27;&gt;10&lt;/property&gt;</span></span><br><span class="line"><span class="string">&lt;/properties&gt;&quot;</span>;</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-XDocument-è§£æ-XML"><a class="header-anchor" href="#ä½¿ç”¨-XDocument-è§£æ-XML"></a>ä½¿ç”¨ XDocument è§£æ XML</h1><h2 id="è®€å–è³‡æ–™ä¸¦è§£æ"><a class="header-anchor" href="#è®€å–è³‡æ–™ä¸¦è§£æ"></a>è®€å–è³‡æ–™ä¸¦è§£æ</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// XML å­—ä¸²è½‰ XDocument</span></span><br><span class="line">XDocument xmlDoc = XDocument.Parse(doc);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–å¾— property åˆ—è¡¨</span></span><br><span class="line">List&lt;XElement&gt; xmlElements = xmlDoc.Element(<span class="string">&quot;properties&quot;</span>).Elements(<span class="string">&quot;property&quot;</span>).ToList();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–å¾—ç¬¬ä¸€ç­† key ç‚º name è³‡æ–™</span></span><br><span class="line"><span class="built_in">string</span> name = xmlElements.Where(x =&gt; x.Attribute(<span class="string">&quot;key&quot;</span>).Value == <span class="string">&quot;name&quot;</span>).FirstOrDefault()?.Value;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="ä½¿ç”¨åºåˆ—åŒ–èˆ‡ååºåˆ—åŒ–æ–¹æ³•è§£æ-XML"><a class="header-anchor" href="#ä½¿ç”¨åºåˆ—åŒ–èˆ‡ååºåˆ—åŒ–æ–¹æ³•è§£æ-XML"></a>ä½¿ç”¨åºåˆ—åŒ–èˆ‡ååºåˆ—åŒ–æ–¹æ³•è§£æ XML</h1><h2 id="å»ºç«‹åºåˆ—åŒ–èˆ‡ååºåˆ—åŒ–æ–¹æ³•"><a class="header-anchor" href="#å»ºç«‹åºåˆ—åŒ–èˆ‡ååºåˆ—åŒ–æ–¹æ³•"></a>å»ºç«‹åºåˆ—åŒ–èˆ‡ååºåˆ—åŒ–æ–¹æ³•</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‰©ä»¶è½‰ XML å­—ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">XmlSerialize</span>&lt;<span class="title">T</span>&gt;(<span class="params">T obj</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">XmlSerializer xsSubmit = <span class="keyword">new</span> XmlSerializer(<span class="keyword">typeof</span>(T));</span><br><span class="line"></span><br><span class="line">XmlSerializerNamespaces ns = <span class="keyword">new</span> XmlSerializerNamespaces();</span><br><span class="line">ns.Add(<span class="built_in">string</span>.Empty, <span class="built_in">string</span>.Empty);</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> memStm = <span class="keyword">new</span> MemoryStream())</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> xw = XmlWriter.Create(memStm))</span><br><span class="line">&#123;</span><br><span class="line">xsSubmit.Serialize(xw, obj, ns);</span><br><span class="line"><span class="built_in">byte</span>[] utf8 = memStm.ToArray();</span><br><span class="line"><span class="keyword">return</span> Encoding.UTF8.GetString(utf8);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// XML å­—ä¸²è½‰ç‰©ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> T <span class="title">XmlDeSerialize</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="built_in">string</span> xmlString</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">XmlSerializer xsSubmit = <span class="keyword">new</span> XmlSerializer(<span class="keyword">typeof</span>(T));</span><br><span class="line"></span><br><span class="line"><span class="built_in">byte</span>[] byteArray = Encoding.UTF8.GetBytes(xmlString);</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> memStm = <span class="keyword">new</span> MemoryStream(byteArray))</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> xr = XmlReader.Create(memStm))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">object</span> data = xsSubmit.Deserialize(xr);</span><br><span class="line"><span class="keyword">return</span> (T)data;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å»ºç«‹é¡åˆ¥"><a class="header-anchor" href="#å»ºç«‹é¡åˆ¥"></a>å»ºç«‹é¡åˆ¥</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">XmlRoot(ElementName = <span class="string">&quot;property&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Property</span> &#123;</span><br><span class="line"></span><br><span class="line">  [<span class="meta">XmlAttribute(AttributeName = <span class="string">&quot;key&quot;</span>)</span>]</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">string</span> Key &#123;</span><br><span class="line">    <span class="keyword">get</span>;</span><br><span class="line">    <span class="keyword">set</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  [<span class="meta">XmlText</span>]</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">string</span> Text &#123;</span><br><span class="line">    <span class="keyword">get</span>;</span><br><span class="line">    <span class="keyword">set</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">XmlRoot(ElementName = <span class="string">&quot;properties&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Properties</span> &#123;</span><br><span class="line"></span><br><span class="line">  [<span class="meta">XmlElement(ElementName = <span class="string">&quot;property&quot;</span>)</span>]</span><br><span class="line">  <span class="keyword">public</span> List &lt; Property &gt; Property &#123;</span><br><span class="line">    <span class="keyword">get</span>;</span><br><span class="line">    <span class="keyword">set</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è®€å–è³‡æ–™ä¸¦è§£æ-v2"><a class="header-anchor" href="#è®€å–è³‡æ–™ä¸¦è§£æ-v2"></a>è®€å–è³‡æ–™ä¸¦è§£æ</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// XML å­—ä¸²è½‰ç‰©ä»¶</span></span><br><span class="line">Properties data = XmlDeSerialize&lt;Properties&gt;(doc);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–å¾—ç¬¬ä¸€ç­† key ç‚º name è³‡æ–™</span></span><br><span class="line"><span class="built_in">string</span> name = data.Property.Where(x =&gt; x.Key == <span class="string">&quot;name&quot;</span>).FirstOrDefault().Text;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‰©ä»¶è½‰ XML å­—ä¸²</span></span><br><span class="line"><span class="built_in">string</span> xmlFile = XmlSerialize(data);</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.xml.linq.xdocument?view=net-8.0">XDocument Class</a></li><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.xml.serialization.xmlserializer?view=net-8.0">XmlSerializer Class</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;XML-è³‡æ–™&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#XML-è³‡æ–™&quot;&gt;&lt;/a&gt;XML è³‡æ–™&lt;/h1&gt;
&lt;p&gt;å®£å‘Š XML æ ¼å¼å­—ä¸²&lt;/p&gt;
&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; doc = &lt;span class=&quot;string&quot;&gt;@&amp;quot;&amp;lt;properties&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;property key=&amp;#x27;name&amp;#x27;&amp;gt;Test&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;property key=&amp;#x27;age&amp;#x27;&amp;gt;10&amp;lt;/property&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;/properties&amp;gt;&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;ä½¿ç”¨-XDocument-è§£æ-XML&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#ä½¿ç”¨-XDocument-è§£æ-XML&quot;&gt;&lt;/a&gt;ä½¿ç”¨ XDocument è§£æ XML&lt;/h1&gt;
&lt;h2 id=&quot;è®€å–è³‡æ–™ä¸¦è§£æ&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#è®€å–è³‡æ–™ä¸¦è§£æ&quot;&gt;&lt;/a&gt;è®€å–è³‡æ–™ä¸¦è§£æ&lt;/h2&gt;
&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// XML å­—ä¸²è½‰ XDocument&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;XDocument xmlDoc = XDocument.Parse(doc);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å–å¾— property åˆ—è¡¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;List&amp;lt;XElement&amp;gt; xmlElements = xmlDoc.Element(&lt;span class=&quot;string&quot;&gt;&amp;quot;properties&amp;quot;&lt;/span&gt;).Elements(&lt;span class=&quot;string&quot;&gt;&amp;quot;property&amp;quot;&lt;/span&gt;).ToList();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å–å¾—ç¬¬ä¸€ç­† key ç‚º name è³‡æ–™&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; name = xmlElements.Where(x =&amp;gt; x.Attribute(&lt;span class=&quot;string&quot;&gt;&amp;quot;key&amp;quot;&lt;/span&gt;).Value == &lt;span class=&quot;string&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;).FirstOrDefault()?.Value;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="XML" scheme="https://choutinghsiao.github.io/tags/XML/"/>
    
  </entry>
  
  <entry>
    <title>è‡ªè¨—ç®¡ PlantUML æœå‹™</title>
    <link href="https://choutinghsiao.github.io/2024/02/04/PlantUmlSelfHosted/"/>
    <id>https://choutinghsiao.github.io/2024/02/04/PlantUmlSelfHosted/</id>
    <published>2024-02-04T18:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åœ¨-Ubuntu-å®‰è£-openjdk-11-jdk"><a class="header-anchor" href="#åœ¨-Ubuntu-å®‰è£-openjdk-11-jdk"></a>åœ¨ Ubuntu å®‰è£ openjdk-11-jdk</h1><p>ä½¿ç”¨ä»¥ä¸‹ Linxu æŒ‡ä»¤ï¼Œå®‰è£ openjdk-11-jdk</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openjdk-11-jdk</span><br></pre></td></tr></table></figure><h1 id="ä¸‹è¼‰-PlantUML-çš„-Jar-æª”æ¡ˆ"><a class="header-anchor" href="#ä¸‹è¼‰-PlantUML-çš„-Jar-æª”æ¡ˆ"></a><a href="https://plantuml.com/zh/download">ä¸‹è¼‰ PlantUML çš„ Jar æª”æ¡ˆ</a></h1><p>ä½¿ç”¨ä»¥ä¸‹ Linxu æŒ‡ä»¤ä¸‹è¼‰æª”æ¡ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O /[åŸ·è¡Œè·¯å¾‘]/plantuml.jar https://github.com/plantuml/plantuml/releases/download/v1.2024.0/plantuml-1.2024.0.jar</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="å»ºç«‹-PlantUML-æœå‹™"><a class="header-anchor" href="#å»ºç«‹-PlantUML-æœå‹™"></a>å»ºç«‹ PlantUML æœå‹™</h1><p>ä½¿ç”¨ä»¥ä¸‹ Linxu æŒ‡ä»¤å»ºç«‹ PlantUML æœå‹™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/systemd/system/plantuml.service</span><br></pre></td></tr></table></figure><p>æœå‹™è²¼ä¸Šä»¥ä¸‹å…§å®¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=PlantUML</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line"><span class="comment"># Deploy folder location</span></span><br><span class="line">WorkingDirectory=[åŸ·è¡Œè·¯å¾‘]</span><br><span class="line"><span class="comment"># Execute project by dotnet Command</span></span><br><span class="line">ExecStart=/usr/bin/java -jar plantuml.jar -picoweb:3060:127.0.0.1</span><br><span class="line">Restart=always</span><br><span class="line"><span class="comment"># Restart service after 10 seconds if the dotnet service crashes:</span></span><br><span class="line">RestartSec=10</span><br><span class="line">KillSignal=SIGINT</span><br><span class="line">SyslogIdentifier=PlantUML</span><br><span class="line">User=wmsdev</span><br><span class="line">MemoryMax=50%</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>å•Ÿç”¨æœå‹™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start plantuml</span><br></pre></td></tr></table></figure><h1 id="è¨­å®š-Visual-Studio-Code"><a class="header-anchor" href="#è¨­å®š-Visual-Studio-Code"></a>è¨­å®š Visual Studio Code</h1><p>å®‰è£ <a href="https://marketplace.visualstudio.com/items?itemName=jebbs.plantuml">PlantUML support for Visual Studio Code</a> å¥—ä»¶ï¼Œä¸¦åœ¨è¨­å®šæª”è¨­å®š plantuml.server åƒæ•¸</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;plantuml.server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://[Domain]/plantuml&quot;</span></span><br></pre></td></tr></table></figure><p>å»ºç«‹ .puml ç‚ºé™„æª”åçš„æª”æ¡ˆï¼Œä¸¦åŠ å…¥ä»¥ä¸‹ä»£ç¢¼ï¼ŒæŒ‰ä¸‹ Alt + D ç”Ÿæˆåœ–æª”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line">:Hello world;</span><br><span class="line">:This is defined on</span><br><span class="line">several **lines**;</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://plantuml.com/zh/picoweb">PlantUML PicoWeb Server</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;åœ¨-Ubuntu-å®‰è£-openjdk-11-jdk&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#åœ¨-Ubuntu-å®‰è£-openjdk-11-jdk&quot;&gt;&lt;/a&gt;åœ¨ Ubuntu å®‰è£ openjdk-11-jdk&lt;/h1&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹ Linxu æŒ‡ä»¤ï¼Œå®‰è£ openjdk-11-jdk&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt install openjdk-11-jdk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;ä¸‹è¼‰-PlantUML-çš„-Jar-æª”æ¡ˆ&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#ä¸‹è¼‰-PlantUML-çš„-Jar-æª”æ¡ˆ&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://plantuml.com/zh/download&quot;&gt;ä¸‹è¼‰ PlantUML çš„ Jar æª”æ¡ˆ&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹ Linxu æŒ‡ä»¤ä¸‹è¼‰æª”æ¡ˆ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget -O /[åŸ·è¡Œè·¯å¾‘]/plantuml.jar https://github.com/plantuml/plantuml/releases/download/v1.2024.0/plantuml-1.2024.0.jar&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Project" scheme="https://choutinghsiao.github.io/categories/Project/"/>
    
    
    <category term="Projectm" scheme="https://choutinghsiao.github.io/tags/Projectm/"/>
    
    <category term="PlantUML" scheme="https://choutinghsiao.github.io/tags/PlantUML/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins åŸ·è¡Œå‚™ä»½å°ˆæ¡ˆå‘½ä»¤</title>
    <link href="https://choutinghsiao.github.io/2024/01/01/JenkinsBackupProject/"/>
    <id>https://choutinghsiao.github.io/2024/01/01/JenkinsBackupProject/</id>
    <published>2024-01-01T16:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¨­å®šåŸ·è¡Œæ™‚é–“"><a class="header-anchor" href="#è¨­å®šåŸ·è¡Œæ™‚é–“"></a>è¨­å®šåŸ·è¡Œæ™‚é–“</h1><p>åœ¨ Pipeline å–å¾—åŸ·è¡Œæ™‚é–“</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dateNow = <span class="keyword">new</span> Date().format( <span class="string">&#x27;yyyyMMddHHmmss&#x27;</span> )</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="è¨­å®šå°ˆæ¡ˆç›®éŒ„èˆ‡å‚™ä»½ç›®éŒ„"><a class="header-anchor" href="#è¨­å®šå°ˆæ¡ˆç›®éŒ„èˆ‡å‚™ä»½ç›®éŒ„"></a>è¨­å®šå°ˆæ¡ˆç›®éŒ„èˆ‡å‚™ä»½ç›®éŒ„</h1><p>åœ¨ Pipeline å®šç¾©å°ˆæ¡ˆç›®éŒ„èˆ‡å‚™ä»½ç›®éŒ„</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">projectPath = <span class="string">&quot;[å°ˆæ¡ˆç›®éŒ„]&quot;</span></span><br><span class="line">backupPath = <span class="string">&quot;[å‚™ä»½ç›®éŒ„]&quot;</span></span><br></pre></td></tr></table></figure><h1 id="ç§»é™¤ä¸‰å€‹æœˆä»¥ä¸Šçš„å‚™ä»½è³‡æ–™"><a class="header-anchor" href="#ç§»é™¤ä¸‰å€‹æœˆä»¥ä¸Šçš„å‚™ä»½è³‡æ–™"></a>ç§»é™¤ä¸‰å€‹æœˆä»¥ä¸Šçš„å‚™ä»½è³‡æ–™</h1><p>ä½¿ç”¨ ssh å‘½ä»¤ç™»å…¥ Server ç§»é™¤ä¸‰å€‹æœˆä»¥ä¸Šçš„å‚™ä»½è³‡æ–™</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh <span class="string">&quot;ssh -p [sshé€£æ¥Port] [å¸³è™Ÿ]@[Serverä½ç½®] \&quot;find $&#123;backupPath&#125;* -maxdepth 0 -type d -ctime +90 2&gt;/dev/null | sudo xargs -r rm -rf \&quot;&quot;</span></span><br></pre></td></tr></table></figure><h1 id="ä¾åŸ·è¡Œæ™‚é–“å»ºç«‹å‚™ä»½ç›®éŒ„"><a class="header-anchor" href="#ä¾åŸ·è¡Œæ™‚é–“å»ºç«‹å‚™ä»½ç›®éŒ„"></a>ä¾åŸ·è¡Œæ™‚é–“å»ºç«‹å‚™ä»½ç›®éŒ„</h1><p>ä½¿ç”¨ ssh å‘½ä»¤ç™»å…¥ Server ä¾åŸ·è¡Œæ™‚é–“å»ºç«‹å‚™ä»½ç›®éŒ„</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh <span class="string">&quot;ssh -p [sshé€£æ¥Port] [å¸³è™Ÿ]@[Serverä½ç½®] \&quot;sudo mkdir -p $&#123;backupPath&#125;$&#123;dateNow&#125; \&quot;&quot;</span></span><br></pre></td></tr></table></figure><h1 id="å°ˆæ¡ˆè¤‡è£½è‡³å‚™ä»½ç›®éŒ„"><a class="header-anchor" href="#å°ˆæ¡ˆè¤‡è£½è‡³å‚™ä»½ç›®éŒ„"></a>å°ˆæ¡ˆè¤‡è£½è‡³å‚™ä»½ç›®éŒ„</h1><p>ä½¿ç”¨ ssh å‘½ä»¤ç™»å…¥ Server å°‡å°ˆæ¡ˆè¤‡è£½è‡³å‚™ä»½ç›®éŒ„</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh <span class="string">&quot;ssh -p [sshé€£æ¥Port] [å¸³è™Ÿ]@[Serverä½ç½®] \&quot;sudo cp -r $&#123;projectPath&#125;* $&#123;backupPath&#125;$&#123;dateNow&#125;/ \&quot;&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;è¨­å®šåŸ·è¡Œæ™‚é–“&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#è¨­å®šåŸ·è¡Œæ™‚é–“&quot;&gt;&lt;/a&gt;è¨­å®šåŸ·è¡Œæ™‚é–“&lt;/h1&gt;
&lt;p&gt;åœ¨ Pipeline å–å¾—åŸ·è¡Œæ™‚é–“&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dateNow = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Date().format( &lt;span class=&quot;string&quot;&gt;&amp;#x27;yyyyMMddHHmmss&amp;#x27;&lt;/span&gt; )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Jenkins" scheme="https://choutinghsiao.github.io/categories/Jenkins/"/>
    
    
    <category term="Jenkins" scheme="https://choutinghsiao.github.io/tags/Jenkins/"/>
    
  </entry>
  
  <entry>
    <title>WSL2 è¨­å®š Docker In Docker</title>
    <link href="https://choutinghsiao.github.io/2024/01/01/Wsl2DockerInDocker/"/>
    <id>https://choutinghsiao.github.io/2024/01/01/Wsl2DockerInDocker/</id>
    <published>2024-01-01T16:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.182Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ›è¼‰ä¸»æ©Ÿçš„-Docker-Socket"><a class="header-anchor" href="#æ›è¼‰ä¸»æ©Ÿçš„-Docker-Socket"></a>æ›è¼‰ä¸»æ©Ÿçš„ Docker Socket</h1><h2 id="å»ºç«‹-daemon-json"><a class="header-anchor" href="#å»ºç«‹-daemon-json"></a>å»ºç«‹ daemon.json</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>åŠ å…¥ä»¥ä¸‹è¨­å®š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;hosts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;unix:///var/run/docker.sock&quot;</span><span class="punctuation">,</span> <span class="string">&quot;tcp://0.0.0.0:&quot;</span> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="åŸ·è¡Œå‘½ä»¤æ™‚é ˆæ›è¼‰-docker-sock"><a class="header-anchor" href="#åŸ·è¡Œå‘½ä»¤æ™‚é ˆæ›è¼‰-docker-sock"></a>åŸ·è¡Œå‘½ä»¤æ™‚é ˆæ›è¼‰ docker.sock</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v /var/run/docker.sock:/var/run/docker.sock -ti [Docker æ˜ åƒæª”]</span><br></pre></td></tr></table></figure><h2 id="é€é-Curl-åŸ·è¡Œ-Docker-Socket-å»ºç«‹-Containers"><a class="header-anchor" href="#é€é-Curl-åŸ·è¡Œ-Docker-Socket-å»ºç«‹-Containers"></a>é€é Curl åŸ·è¡Œ Docker Socket å»ºç«‹ Containers</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST --unix-socket /var/run/docker.sock -d <span class="string">&#x27;&#123;&quot;Image&quot;:&quot;[Docker æ˜ åƒæª”]&quot;&#125;&#x27;</span> -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> http://localhost/containers/create</span><br></pre></td></tr></table></figure><h2 id="é€é-Curl-åŸ·è¡Œ-Docker-Socket-å•Ÿå‹•-Containers"><a class="header-anchor" href="#é€é-Curl-åŸ·è¡Œ-Docker-Socket-å•Ÿå‹•-Containers"></a>é€é Curl åŸ·è¡Œ Docker Socket å•Ÿå‹• Containers</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST --unix-socket /var/run/docker.sock http://localhost/containers/[å®¹å™¨ç·¨è™Ÿ]/start</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="ä½¿ç”¨-docker-dind-æ˜ åƒ"><a class="header-anchor" href="#ä½¿ç”¨-docker-dind-æ˜ åƒ"></a>ä½¿ç”¨ docker:dind æ˜ åƒ</h1><p>å¯åƒè€ƒä»¥ä¸‹å…©ç¨®æ–¹æ³•é‹è¡Œ docker:dind æ˜ åƒ</p><h2 id="éœ€è¦åŸ·è¡Œå¸¶æœ‰è©²â€“privilegedé¸é …å’Œä¸€äº›é™„åŠ æ¨™èªŒçš„å®¹å™¨"><a class="header-anchor" href="#éœ€è¦åŸ·è¡Œå¸¶æœ‰è©²â€“privilegedé¸é …å’Œä¸€äº›é™„åŠ æ¨™èªŒçš„å®¹å™¨"></a>éœ€è¦åŸ·è¡Œå¸¶æœ‰è©²â€“privilegedé¸é …å’Œä¸€äº›é™„åŠ æ¨™èªŒçš„å®¹å™¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p [æœ¬æ©Ÿé€£æ¥Port]:2375 --privileged -e DOCKER_TLS_CERTDIR=<span class="string">&quot;&quot;</span> --name privileged-docker -d docker:dind</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-Nestybox-Sysbox-é‹è¡Œæ™‚åŸ·è¡Œ"><a class="header-anchor" href="#ä½¿ç”¨-Nestybox-Sysbox-é‹è¡Œæ™‚åŸ·è¡Œ"></a>ä½¿ç”¨ Nestybox Sysbox é‹è¡Œæ™‚åŸ·è¡Œ</h2><p><a href="https://github.com/nestybox/sysbox?ref=kodekloud.com">å®‰è£ Nestybox Sysbox</a>ï¼Œä¸éœ€è¦ç‰¹æ¬Šæ¨¡å¼æˆ–ç‰¹æ®Šé…ç½®ï¼Œå³å¯åŸ·è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é–‹æ”¾ 2375 è‡³æœ¬æ©Ÿé€£æ¥ Port</span></span><br><span class="line">docker run -p [æœ¬æ©Ÿé€£æ¥Port]:2375 -e DOCKER_TLS_CERTDIR=<span class="string">&quot;&quot;</span> --runtime=sysbox-runc --name sysbox-docker -d docker:dind</span><br></pre></td></tr></table></figure><p>VSCode ä½¿ç”¨ Docker contexts é€£ç·šè‡³é ç«¯ Docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker context create <span class="built_in">test</span> --docker <span class="string">&quot;host=tcp://127.0.0.1:[æœ¬æ©Ÿé€£æ¥Port]&quot;</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://kodekloud.com/blog/run-docker-in-docker-container/">3 Best Ways to Run Docker in Docker Container</a></li><li><a href="https://docs.docker.com/engine/api/sdk/examples/">Examples using the Docker Engine SDKs and Docker API</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æ›è¼‰ä¸»æ©Ÿçš„-Docker-Socket&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#æ›è¼‰ä¸»æ©Ÿçš„-Docker-Socket&quot;&gt;&lt;/a&gt;æ›è¼‰ä¸»æ©Ÿçš„ Docker Socket&lt;/h1&gt;
&lt;h2 id=&quot;å»ºç«‹-daemon-json&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å»ºç«‹-daemon-json&quot;&gt;&lt;/a&gt;å»ºç«‹ daemon.json&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo nano /etc/docker/daemon.json&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åŠ å…¥ä»¥ä¸‹è¨­å®š&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&amp;quot;hosts&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;unix:///var/run/docker.sock&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;tcp://0.0.0.0:&amp;quot;&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&amp;quot;tls&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;åŸ·è¡Œå‘½ä»¤æ™‚é ˆæ›è¼‰-docker-sock&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#åŸ·è¡Œå‘½ä»¤æ™‚é ˆæ›è¼‰-docker-sock&quot;&gt;&lt;/a&gt;åŸ·è¡Œå‘½ä»¤æ™‚é ˆæ›è¼‰ docker.sock&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker run -v /var/run/docker.sock:/var/run/docker.sock -ti [Docker æ˜ åƒæª”]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;é€é-Curl-åŸ·è¡Œ-Docker-Socket-å»ºç«‹-Containers&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#é€é-Curl-åŸ·è¡Œ-Docker-Socket-å»ºç«‹-Containers&quot;&gt;&lt;/a&gt;é€é Curl åŸ·è¡Œ Docker Socket å»ºç«‹ Containers&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -XPOST --unix-socket /var/run/docker.sock -d &lt;span class=&quot;string&quot;&gt;&amp;#x27;&amp;#123;&amp;quot;Image&amp;quot;:&amp;quot;[Docker æ˜ åƒæª”]&amp;quot;&amp;#125;&amp;#x27;&lt;/span&gt; -H &lt;span class=&quot;string&quot;&gt;&amp;#x27;Content-Type: application/json&amp;#x27;&lt;/span&gt; http://localhost/containers/create&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;é€é-Curl-åŸ·è¡Œ-Docker-Socket-å•Ÿå‹•-Containers&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#é€é-Curl-åŸ·è¡Œ-Docker-Socket-å•Ÿå‹•-Containers&quot;&gt;&lt;/a&gt;é€é Curl åŸ·è¡Œ Docker Socket å•Ÿå‹• Containers&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -XPOST --unix-socket /var/run/docker.sock http://localhost/containers/[å®¹å™¨ç·¨è™Ÿ]/start&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
    <category term="Docker" scheme="https://choutinghsiao.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Flask-Caching ç·©å­˜ Flask å‘¼å«æ–¹æ³•ç”¢ç”Ÿçš„è³‡æ–™</title>
    <link href="https://choutinghsiao.github.io/2023/07/07/PythonFlaskCaching/"/>
    <id>https://choutinghsiao.github.io/2023/07/07/PythonFlaskCaching/</id>
    <published>2023-07-07T23:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£å¥—ä»¶"><a class="header-anchor" href="#å®‰è£å¥—ä»¶"></a>å®‰è£å¥—ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install Flask</span><br><span class="line">pip install Flask-Caching</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="å»ºç«‹-address-json-å…§å®¹å¦‚ä¸‹"><a class="header-anchor" href="#å»ºç«‹-address-json-å…§å®¹å¦‚ä¸‹"></a>å»ºç«‹ address.json å…§å®¹å¦‚ä¸‹</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ–°ç«¹å¸‚&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Zip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;300&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="å»ºç«‹-app-py-å…§å®¹å¦‚ä¸‹"><a class="header-anchor" href="#å»ºç«‹-app-py-å…§å®¹å¦‚ä¸‹"></a>å»ºç«‹ <a href="http://app.py">app.py</a> å…§å®¹å¦‚ä¸‹</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_caching <span class="keyword">import</span> Cache</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;DEBUG&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">    <span class="string">&quot;CACHE_TYPE&quot;</span>: <span class="string">&quot;SimpleCache&quot;</span>,</span><br><span class="line">    <span class="string">&quot;CACHE_DEFAULT_TIMEOUT&quot;</span>: <span class="number">3000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config.from_mapping(config)</span><br><span class="line">cache = Cache(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨è£é£¾å™¨ç·©å­˜å‘¼å«æ–¹æ³•ç”¢ç”Ÿçš„è³‡æ–™</span></span><br><span class="line"><span class="meta">@cache.memoize(<span class="params">timeout=<span class="number">50</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">LoadAllAddress</span>():</span><br><span class="line">    <span class="comment"># è®€å– address.json</span></span><br><span class="line">    file = <span class="built_in">open</span>(<span class="string">&#x27;address.json&#x27;</span>)</span><br><span class="line">    data = json.load(file)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆªé™¤ç·©å­˜</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/ClearAddressCache&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delAddress</span>():</span><br><span class="line">   <span class="comment"># åˆªé™¤ç·©å­˜å‘¼å«æ–¹æ³•ç”¢ç”Ÿçš„è³‡æ–™</span></span><br><span class="line">   cache.delete_memoized(LoadAllAddress)</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;Clear Success&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å–å¾— address.json çš„è³‡æ–™</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/GetAllAddress&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">AllAddress</span>():</span><br><span class="line">    <span class="keyword">return</span> LoadAllAddress()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://flask-caching.readthedocs.io/en/latest/">Flask-Caching</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å®‰è£å¥—ä»¶&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å®‰è£å¥—ä»¶&quot;&gt;&lt;/a&gt;å®‰è£å¥—ä»¶&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install Flask&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pip install Flask-Caching&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/tags/Python/"/>
    
    <category term="Flask" scheme="https://choutinghsiao.github.io/tags/Flask/"/>
    
    <category term="Caching" scheme="https://choutinghsiao.github.io/tags/Caching/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Flask-SQLAlchemy é€£æ¥ MSSQL é€²è¡Œ CRUD</title>
    <link href="https://choutinghsiao.github.io/2023/07/07/PythonFlaskSQLAlchemy/"/>
    <id>https://choutinghsiao.github.io/2023/07/07/PythonFlaskSQLAlchemy/</id>
    <published>2023-07-07T23:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£å¥—ä»¶"><a class="header-anchor" href="#å®‰è£å¥—ä»¶"></a>å®‰è£å¥—ä»¶</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install Flask</span><br><span class="line">pip install flask-sqlalchemy</span><br><span class="line">pip install pymssql</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="å»ºç«‹-app-py-å…§å®¹å¦‚ä¸‹"><a class="header-anchor" href="#å»ºç«‹-app-py-å…§å®¹å¦‚ä¸‹"></a>å»ºç«‹ <a href="http://app.py">app.py</a> å…§å®¹å¦‚ä¸‹</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,request,jsonify</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;SQLALCHEMY_TRACK_MODIFICATIONS&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">    <span class="string">&quot;SQLALCHEMY_DATABASE_URI&quot;</span>: <span class="string">&quot;mssql+pymssql://[ä½¿ç”¨è€…å¸³è™Ÿ]:%s@[æœå‹™å™¨IP]:[ç«¯å£]/[è³‡æ–™åº«åç¨±]?charset=utf8&quot;</span>% parse.quote(<span class="string">&#x27;[ä½¿ç”¨è€…å¯†ç¢¼]&#x27;</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config.from_mapping(config)</span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹è³‡æ–™è¡¨å°æ‡‰é¡åˆ¥</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddressMap</span>(db.Model):</span><br><span class="line">    <span class="comment"># è³‡æ–™è¡¨åç¨±</span></span><br><span class="line">    __tablename__ = <span class="string">&#x27;AddressMap&#x27;</span></span><br><span class="line">    <span class="comment"># å”¯ä¸€è­˜åˆ¥ç¢¼</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># åœ°å€</span></span><br><span class="line">    address = db.Column(db.String(<span class="number">200</span>, collation=<span class="string">&quot;Chinese_Taiwan_Stroke_CI_AS&quot;</span>), unique=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line">    <span class="comment"># éƒµå€</span></span><br><span class="line">    <span class="built_in">zip</span> = db.Column(db.String(<span class="number">6</span>), unique=<span class="literal">False</span>, nullable=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, address, <span class="built_in">zip</span></span>):</span><br><span class="line">        self.address = address</span><br><span class="line">        self.<span class="built_in">zip</span> = <span class="built_in">zip</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">serialize</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">           <span class="string">&#x27;Id&#x27;</span> : self.<span class="built_in">id</span>,</span><br><span class="line">           <span class="string">&#x27;Address&#x27;</span> : self.address,</span><br><span class="line">           <span class="string">&#x27;Zip&#x27;</span> : self.<span class="built_in">zip</span></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&lt;AddressMap %r&gt;&#x27;</span> % self.address</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.before_first_request</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_table</span>():</span><br><span class="line">    db.create_all()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å»ºç«‹è³‡æ–™</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/Address/Create&#x27;</span> , methods = [<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Create</span>():</span><br><span class="line">    data = request.json</span><br><span class="line">    address = data[<span class="string">&#x27;Address&#x27;</span>]</span><br><span class="line">    <span class="built_in">zip</span> = data[<span class="string">&#x27;Zip&#x27;</span>]</span><br><span class="line">    addressMap = AddressMap(address=address, <span class="built_in">zip</span>=<span class="built_in">zip</span>)</span><br><span class="line">    db.session.add(addressMap)</span><br><span class="line">    db.session.commit()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Create Success&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å–å¾—è³‡æ–™</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/Address/GetAll&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">AllAddress</span>():</span><br><span class="line">    all_address = AddressMap.query.<span class="built_in">all</span>()</span><br><span class="line">    addressList = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x.serialize(), all_address))</span><br><span class="line">    <span class="keyword">return</span> jsonify(result=addressList)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°è³‡æ–™</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/Address/Update&#x27;</span> , methods = [<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Update</span>():</span><br><span class="line">    data = request.json</span><br><span class="line">    <span class="built_in">id</span> = data[<span class="string">&#x27;Id&#x27;</span>]</span><br><span class="line">    address = AddressMap.query.filter_by(<span class="built_in">id</span>=<span class="built_in">id</span>).first()</span><br><span class="line">    <span class="keyword">if</span> address:</span><br><span class="line">        address.verified = <span class="literal">True</span></span><br><span class="line">        address.address = data[<span class="string">&#x27;Address&#x27;</span>]</span><br><span class="line">        address.<span class="built_in">zip</span> = data[<span class="string">&#x27;Zip&#x27;</span>]</span><br><span class="line">        db.session.commit()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Update Success&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆªé™¤è³‡æ–™</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/Address/Delete&#x27;</span> , methods = [<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Delete</span>():</span><br><span class="line">    data = request.json</span><br><span class="line">    <span class="built_in">id</span> = data[<span class="string">&#x27;Id&#x27;</span>]</span><br><span class="line">    address = AddressMap.query.filter_by(<span class="built_in">id</span>=<span class="built_in">id</span>).first()</span><br><span class="line">    <span class="keyword">if</span> address:</span><br><span class="line">        db.session.delete(address)</span><br><span class="line">        db.session.commit()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Delete Success&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><!-- export FLASK_APP=appflask shellfrom app import db, AddressMapdb.create_all() --><h1 id="ä½¿ç”¨Curlå‘¼å«API"><a class="header-anchor" href="#ä½¿ç”¨Curlå‘¼å«API"></a>ä½¿ç”¨Curlå‘¼å«API</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºç«‹è³‡æ–™</span></span><br><span class="line">curl --location <span class="string">&#x27;http://127.0.0.1:5000/Address/Create&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;Address&quot; : &quot;æ–°ç«¹å¸‚&quot;,</span></span><br><span class="line"><span class="string">    &quot;Zip&quot; : &quot;300&quot;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å–å¾—è³‡æ–™</span></span><br><span class="line">curl --location <span class="string">&#x27;http://127.0.0.1:5000/Address/GetAll&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°è³‡æ–™</span></span><br><span class="line">curl --location <span class="string">&#x27;http://127.0.0.1:5000/Address/Update&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;Id&quot; : 1,</span></span><br><span class="line"><span class="string">    &quot;Address&quot; : &quot;æ–°ç«¹å¸‚&quot;,</span></span><br><span class="line"><span class="string">    &quot;Zip&quot; : &quot;999&quot;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆªé™¤è³‡æ–™</span></span><br><span class="line">curl --location <span class="string">&#x27;http://127.0.0.1:5000/Address/Delete&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;Id&quot; : 1</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://flask-sqlalchemy.palletsprojects.com/en/3.0.x/">Flask-SQLAlchemy</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å®‰è£å¥—ä»¶&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å®‰è£å¥—ä»¶&quot;&gt;&lt;/a&gt;å®‰è£å¥—ä»¶&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install Flask&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pip install flask-sqlalchemy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pip install pymssql&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://choutinghsiao.github.io/tags/Python/"/>
    
    <category term="Flask" scheme="https://choutinghsiao.github.io/tags/Flask/"/>
    
    <category term="MSSQL" scheme="https://choutinghsiao.github.io/tags/MSSQL/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ SSH å»ºç«‹é€šé“</title>
    <link href="https://choutinghsiao.github.io/2023/05/07/LinuxSshTunnel/"/>
    <id>https://choutinghsiao.github.io/2023/05/07/LinuxSshTunnel/</id>
    <published>2023-05-07T18:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æœ¬æ©Ÿç‰¹å®šç«¯å£è½‰ç™¼è‡³è·³æ¿æ©Ÿ"><a class="header-anchor" href="#æœ¬æ©Ÿç‰¹å®šç«¯å£è½‰ç™¼è‡³è·³æ¿æ©Ÿ"></a>æœ¬æ©Ÿç‰¹å®šç«¯å£è½‰ç™¼è‡³è·³æ¿æ©Ÿ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p [è·³æ¿æ©Ÿç«¯å£] -C -f -N -g -L [æœ¬åœ°ç«¯å£]:[é ç«¯æœå‹™IP]:[é ç«¯æœå‹™ç«¯å£] [å¸³è™Ÿ]@[è·³æ¿æ©ŸIP]</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="è·³æ¿æ©Ÿè½‰ç™¼è‡³æœ¬æ©Ÿç‰¹å®šç«¯å£"><a class="header-anchor" href="#è·³æ¿æ©Ÿè½‰ç™¼è‡³æœ¬æ©Ÿç‰¹å®šç«¯å£"></a>è·³æ¿æ©Ÿè½‰ç™¼è‡³æœ¬æ©Ÿç‰¹å®šç«¯å£</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p [è·³æ¿æ©Ÿç«¯å£] -C -g -R 0.0.0.0:[è·³æ¿æ©Ÿç«¯å£]:localhost:[æœ¬åœ°ç«¯å£] [å¸³è™Ÿ]@[è·³æ¿æ©ŸIP]</span><br></pre></td></tr></table></figure><h1 id="è«‹æ±‚è½‰ç™¼è‡³è·³æ¿ï¼Œå¯æ­é…-Whistle-åš-Socks-ä»£ç†"><a class="header-anchor" href="#è«‹æ±‚è½‰ç™¼è‡³è·³æ¿ï¼Œå¯æ­é…-Whistle-åš-Socks-ä»£ç†"></a>è«‹æ±‚è½‰ç™¼è‡³è·³æ¿ï¼Œå¯æ­é… Whistle åš Socks ä»£ç†</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p [è·³æ¿æ©Ÿç«¯å£] -D localhost:[æœ¬åœ°ç«¯å£] [å¸³è™Ÿ]@[è·³æ¿æ©ŸIP]</span><br></pre></td></tr></table></figure><h1 id="ssh-åŸ·è¡Œé¸é …èªªæ˜"><a class="header-anchor" href="#ssh-åŸ·è¡Œé¸é …èªªæ˜"></a>ssh åŸ·è¡Œé¸é …èªªæ˜</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-L: æŒ‡å®šå°‡æœ¬æ©Ÿä¸Šçš„ç‰¹å®šç«¯å£è½‰ç™¼åˆ°é ç«¯ä¸»æ©Ÿ</span><br><span class="line">-R: è¡¨ç¤ºä½¿ç”¨é ç¨‹ç«¯å£è½‰ç™¼å‰µå»ºsshéš§é“</span><br><span class="line">-D: portå‹•æ…‹æ‡‰ç”¨ç´šç«¯å£è½‰â€‹â€‹ç™¼</span><br><span class="line">-p: è·³æ¿æ©Ÿç«¯å£</span><br><span class="line">-C: ä½¿ç”¨æ•¸æ“šå£“ç¸®</span><br><span class="line">-c: cipher_specé¸æ“‡ç”¨æ–¼åŠ å¯†æœƒè©±çš„å¯†ç¢¼è¦ç¯„</span><br><span class="line">-f: ä»£è¡¨å¾Œå°é‹è¡Œç¨‹åº</span><br><span class="line">-F: configfileæŒ‡å®šæ¯å€‹ç”¨æˆ¶çš„é…ç½®æ–‡ä»¶</span><br><span class="line">-N: ä¸è¦åŸ·è¡Œä»»ä½•é ç«¯æŒ‡ä»¤</span><br><span class="line">-g: å…è¨±é ç¨‹ä¸»æ©Ÿé€£æ¥åˆ°æœ¬åœ°è½‰ç™¼ç«¯å£</span><br></pre></td></tr></table></figure><!-- /etc/ssh/sshd_config åŠ å…¥GatewayPorts è¨­å®šï¼Œèƒ½è®“æ‰€æœ‰äººéƒ½é€£åˆ° --><!-- scoop install puttyplink -v -x -a -T -C -noagent -ssh -pw "[å¯†ç¢¼]" -P 50893 -L [æœ¬åœ°ç«¯å£]:[é ç«¯æœå‹™IP]:[é ç«¯æœå‹™ç«¯å£] [å¸³è™Ÿ]@[è·³æ¿æ©ŸIP] --><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://www.ssh.com/academy/ssh/command">SSH Command - Usage, Options, Configuration</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æœ¬æ©Ÿç‰¹å®šç«¯å£è½‰ç™¼è‡³è·³æ¿æ©Ÿ&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#æœ¬æ©Ÿç‰¹å®šç«¯å£è½‰ç™¼è‡³è·³æ¿æ©Ÿ&quot;&gt;&lt;/a&gt;æœ¬æ©Ÿç‰¹å®šç«¯å£è½‰ç™¼è‡³è·³æ¿æ©Ÿ&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh -p [è·³æ¿æ©Ÿç«¯å£] -C -f -N -g -L [æœ¬åœ°ç«¯å£]:[é ç«¯æœå‹™IP]:[é ç«¯æœå‹™ç«¯å£] [å¸³è™Ÿ]@[è·³æ¿æ©ŸIP]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/tags/Linux/"/>
    
    <category term="Ubuntu" scheme="https://choutinghsiao.github.io/tags/Ubuntu/"/>
    
    <category term="Ssh" scheme="https://choutinghsiao.github.io/tags/Ssh/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ lldb åˆ†æ Dotnet æ ¸å¿ƒå‚¾å°æª”æ¡ˆ</title>
    <link href="https://choutinghsiao.github.io/2023/05/07/NetCoreDump/"/>
    <id>https://choutinghsiao.github.io/2023/05/07/NetCoreDump/</id>
    <published>2023-05-07T18:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-apport-è§£å£“ç¸®æ ¸å¿ƒå‚¾å°æª”æ¡ˆ"><a class="header-anchor" href="#ä½¿ç”¨-apport-è§£å£“ç¸®æ ¸å¿ƒå‚¾å°æª”æ¡ˆ"></a>ä½¿ç”¨ apport è§£å£“ç¸®æ ¸å¿ƒå‚¾å°æª”æ¡ˆ</h1><p>å®‰è£ apport</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install apport</span><br></pre></td></tr></table></figure><p>è§£å£“ç¸®æ ¸å¿ƒå‚¾å°æª”æ¡ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apport-unpack [systemGeneratedCrashReportPath].crash [yourNewUnpackDirectoryHere]</span><br></pre></td></tr></table></figure><span id="more"></span><!-- cd [yourNewUnpackDirectoryHere]/sudo apt install gdbgdb `cat ExecutablePath` CoreDumpå †ç–Š: bt fullé¡¯ç¤ºä¸€äº›ç‰¹å®šçš„è³‡è¨Š: infoä¸­æ–·é»: bå°å‡ºç¨‹å¼ç¢¼: list ( l )é¡¯ç¤ºæ­£åœ¨åŸ·è¡Œçš„ç¨‹å¼:info frame 0å°åŸ·è¡Œä¸­çš„ç¨‹å¼ä»¥é€²è¡Œé™¤éŒ¯: attach PIDåœ¨æ‹‹å‡ºçš„ç•°å¸¸ä¸Šè¨­ç½®æ–·é»: catch throwå°å‡ºè®Šæ•¸å…§å®¹: print *(long**)0x7fffffffdc98æª¢æŸ¥é»: watch *(long**)0x7fffffffdc98åå‘èª¿è©¦: reverse-stepi --><!-- export PATH="$PATH:/root/.dotnet/tools" --><!-- dotnet tool install -g dotnet-dumpdotnet-dump psdotnet-dump collect --process-id 1902 --><h1 id="å®‰è£-Dotnet-å·¥å…·"><a class="header-anchor" href="#å®‰è£-Dotnet-å·¥å…·"></a>å®‰è£ Dotnet å·¥å…·</h1><p>å®‰è£ dotnet-symbol å°å‡ºå‚¾å°æª”æ¡ˆçš„ç¬¦è™Ÿ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet tool install -g dotnet-symbol</span><br></pre></td></tr></table></figure><p>å°å‡ºå‚¾å°æª”æ¡ˆçš„ç¬¦è™Ÿ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet-symbol ~/dumps/dotnet/CoreDump -o ~/dumps/symbols --host-only</span><br></pre></td></tr></table></figure><p>å®‰è£ SOS æ“´å……åµéŒ¯å·¥å…·åŠŸèƒ½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dotnet tool install -g dotnet-sos</span><br><span class="line">dotnet-sos install</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-lldb-åµéŒ¯"><a class="header-anchor" href="#ä½¿ç”¨-lldb-åµéŒ¯"></a>ä½¿ç”¨ lldb åµéŒ¯</h1><p>å®‰è£ lldb</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install lldb</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ lldb åˆ†ææ ¸å¿ƒå‚¾å°æª”æ¡ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lldb --core ~/dumps/dotnet/CoreDump</span><br></pre></td></tr></table></figure><p>åœ¨ lldb ä¸­è¼‰å…¥å°å…¥å‚¾å°æª”æ¡ˆçš„ç¬¦è™Ÿ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsymbolserver -directory ~/dumps/symbols</span><br></pre></td></tr></table></figure><p>åœ¨ lldb ä¸­å¸¸ç”¨å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">åŸ·è¡Œç·’æ¸…å–®: clrthreads</span><br><span class="line">åˆ‡æ›åŸ·è¡Œåº: thread <span class="keyword">select</span> [thread]</span><br><span class="line">ç·šç¨‹æ£§æ¸…å–®: clrstack</span><br><span class="line">æ‰€æœ‰è¨—ç®¡å †ç‰©ä»¶: dso</span><br><span class="line">è¨—ç®¡å †ç‹€æ…‹: dumpheap -<span class="built_in">stat</span></span><br><span class="line">å°‹æ‰¾è¨—ç®¡å †çš„ä½å€: dumpheap -mt [address]</span><br><span class="line">ç¨‹åºæœ€è¿‘éƒ½æ‹‹äº†ä»€éº¼ç•°å¸¸: dumpheap -<span class="built_in">type</span> Exception</span><br><span class="line">ç•°å¸¸ç‹€æ³è³‡è¨Š: pe</span><br><span class="line">ç•°å¸¸çš„è©³ç´°ä¿¡æ¯: pe [address]</span><br><span class="line">åˆ†æç‰©ä»¶ä½ç½®: dumpobj [address]</span><br><span class="line">åˆ†æé™£åˆ—ä½ç½®: dumparray [address]</span><br><span class="line">GCç‹€æ…‹:  eeheap -gc</span><br></pre></td></tr></table></figure><h1 id="å®‰è£-ProcDump"><a class="header-anchor" href="#å®‰è£-ProcDump"></a>å®‰è£ ProcDump</h1><p>ç•¶ç›®æ¨™é€²ç¨‹ CPU æˆ–è¨˜æ†¶é«”ä½¿ç”¨é‡é”åˆ°ç‰¹å®šè‡¨ç•Œå€¼æˆ–ä½æ–¼é™åˆ¶å€¼æ™‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ ProcDump ä¾†æ“·å–è¨˜æ†¶é«”å‚¾å°æª”æ¡ˆã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install procdump</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://learn.microsoft.com/zh-tw/troubleshoot/developer/webapps/aspnetcore/practice-troubleshoot-linux/lab-1-1-reproduce-troubleshoot">é‡ç¾ææ¯€å•é¡Œä¸¦é€²è¡Œç–‘é›£æ’è§£</a></li><li><a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/sos-debugging-extension">SOS debugging extension</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ä½¿ç”¨-apport-è§£å£“ç¸®æ ¸å¿ƒå‚¾å°æª”æ¡ˆ&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#ä½¿ç”¨-apport-è§£å£“ç¸®æ ¸å¿ƒå‚¾å°æª”æ¡ˆ&quot;&gt;&lt;/a&gt;ä½¿ç”¨ apport è§£å£“ç¸®æ ¸å¿ƒå‚¾å°æª”æ¡ˆ&lt;/h1&gt;
&lt;p&gt;å®‰è£ apport&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt install apport&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è§£å£“ç¸®æ ¸å¿ƒå‚¾å°æª”æ¡ˆ&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apport-unpack [systemGeneratedCrashReportPath].crash [yourNewUnpackDirectoryHere]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/tags/Linux/"/>
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="lldb" scheme="https://choutinghsiao.github.io/tags/lldb/"/>
    
  </entry>
  
  <entry>
    <title>Win10 å®¶ç”¨ç‰ˆå®‰è£ Docker</title>
    <link href="https://choutinghsiao.github.io/2023/05/05/Win10HomeDocker/"/>
    <id>https://choutinghsiao.github.io/2023/05/05/Win10HomeDocker/</id>
    <published>2023-05-05T00:10:00.000Z</published>
    <updated>2024-02-04T13:46:50.182Z</updated>
    
    <content type="html"><![CDATA[<div class="note danger"><p>è«‹æ³¨æ„ï¼Œä¸‹æ–¹ Docker æ‡‰ç”¨åªæ”¯æ´ä»¥ ï¼·indows ç‚ºåŸºåº•çš„ Image</p></div><h1 id="ä½¿ç”¨-Scoop-å®‰è£-Docker"><a class="header-anchor" href="#ä½¿ç”¨-Scoop-å®‰è£-Docker"></a>ä½¿ç”¨ Scoop å®‰è£ Docker</h1><p>åŸ·è¡Œä¸‹æ–¹å‘½ä»¤å®‰è£</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install docker</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="èª¿æ•´å®‰è£ç©ºé–“"><a class="header-anchor" href="#èª¿æ•´å®‰è£ç©ºé–“"></a>èª¿æ•´å®‰è£ç©ºé–“</h1><p>è¤‡è£½ Docker è³‡æ–™è‡³ç£ç¢Ÿæ©Ÿ D ï¼Œç¯€çœç£ç¢Ÿæ©Ÿ C çš„ç©ºé–“</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Copy-Item</span> <span class="string">&#x27;C:\ProgramData\docker&#x27;</span> <span class="literal">-Destination</span> <span class="string">&#x27;d:\\docker&#x27;</span></span><br></pre></td></tr></table></figure><p>å»ºç«‹ â€˜C:\ProgramData\docker\config\daemon.jsonâ€™</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;hosts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;tcp://0.0.0.0:&quot;</span> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data-root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;d:\\docker&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dns&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;8.8.8.8&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="note danger"><p>è«‹æ³¨æ„ï¼Œå›  Win10 å®¶ç”¨ç‰ˆæœ¬èº«ä¸æ”¯æ´å®‰è£ä¸‹æ–¹åŠŸèƒ½ï¼Œé–‹å•Ÿå¾Œå¯èƒ½ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤ï¼Œåƒ…ä¾›å­¸ç¿’ä½¿ç”¨</p></div><h1 id="å®‰è£-Hyper-V-åŠŸèƒ½"><a class="header-anchor" href="#å®‰è£-Hyper-V-åŠŸèƒ½"></a>å®‰è£ Hyper-V åŠŸèƒ½</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°‡æ‰¹è™•ç†æª”æ¡ˆæ‰€åœ¨çš„ç›®éŒ„è¨­å®šç‚ºå·¥ä½œç›®éŒ„</span></span><br><span class="line"><span class="built_in">pushd</span> <span class="string">&quot;%~dp0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°‹æ‰¾ç¬¦åˆæª”æ¡ˆåçš„æ‰€æœ‰æª”æ¡ˆåï¼ŒåŒ¯å‡ºæ–‡å­—æª”</span></span><br><span class="line"><span class="built_in">dir</span> /b %SystemRoot%\servicing\Packages\*Hyper<span class="literal">-V</span>*.mum &gt;hyper<span class="literal">-v</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å…¥å¥—ä»¶</span></span><br><span class="line"><span class="keyword">for</span> /f %%i <span class="keyword">in</span> (<span class="string">&#x27;findstr /i . hyper-v.txt 2^&gt;nul&#x27;</span>) <span class="keyword">do</span> dism /online /norestart /<span class="built_in">add-package</span>:<span class="string">&quot;%SystemRoot%\servicing\Packages\%%i&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»é™¤æ–‡å­—æª”</span></span><br><span class="line"><span class="built_in">del</span> hyper<span class="literal">-v</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£å®¹å™¨å¥—ä»¶</span></span><br><span class="line">Dism /online /<span class="built_in">enable-feature</span> /featurename:Microsoft<span class="literal">-Hyper-V-All</span> /LimitAccess /ALL</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ–¹ä»£ç¢¼å»ºç«‹ .bat åŸ·è¡Œæ–‡ä»¶ï¼Œä¸¦ä½¿ç”¨ç®¡ç†è€…æ¬Šé™åŸ·è¡Œ</p><h1 id="å®‰è£å®¹å™¨åŠŸèƒ½"><a class="header-anchor" href="#å®‰è£å®¹å™¨åŠŸèƒ½"></a>å®‰è£å®¹å™¨åŠŸèƒ½</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°‡æ‰¹è™•ç†æª”æ¡ˆæ‰€åœ¨çš„ç›®éŒ„è¨­å®šç‚ºå·¥ä½œç›®éŒ„</span></span><br><span class="line"><span class="built_in">pushd</span> <span class="string">&quot;%~dp0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°‹æ‰¾ç¬¦åˆæª”æ¡ˆåçš„æ‰€æœ‰æª”æ¡ˆåï¼ŒåŒ¯å‡ºæ–‡å­—æª”</span></span><br><span class="line"><span class="built_in">dir</span> /b %SystemRoot%\servicing\Packages\*containers*.mum &gt;containers.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å…¥å¥—ä»¶</span></span><br><span class="line"><span class="keyword">for</span> /f %%i <span class="keyword">in</span> (<span class="string">&#x27;findstr /i . containers.txt 2^&gt;nul&#x27;</span>) <span class="keyword">do</span> dism /online /norestart /<span class="built_in">add-package</span>:<span class="string">&quot;%SystemRoot%\servicing\Packages\%%i&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»é™¤æ–‡å­—æª”</span></span><br><span class="line"><span class="built_in">del</span> containers.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£å®¹å™¨å¥—ä»¶</span></span><br><span class="line">Dism /online /<span class="built_in">enable-feature</span> /featurename:containers /LimitAccess /ALL</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ–¹ä»£ç¢¼å»ºç«‹ .bat åŸ·è¡Œæ–‡ä»¶ï¼Œä¸¦ä½¿ç”¨ç®¡ç†è€…æ¬Šé™åŸ·è¡Œ</p><h1 id="åŸ·è¡Œ-Docker"><a class="header-anchor" href="#åŸ·è¡Œ-Docker"></a>åŸ·è¡Œ Docker</h1><p>åŸ·è¡Œä¸‹æ–¹å‘½ä»¤è¨»å†Š ï¼·indows æœå‹™</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dockerd <span class="literal">--register-service</span> ; <span class="built_in">Start-Service</span> docker ; <span class="keyword">exit</span></span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://scoop.sh/#/apps?q=docker&amp;s=0&amp;d=1&amp;o=true">Scoop Docker</a></li><li><a href="https://learn.microsoft.com/zh-tw/virtualization/windowscontainers/manage-containers/container-base-images">Windows Base Image</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;div class=&quot;note danger&quot;&gt;&lt;p&gt;è«‹æ³¨æ„ï¼Œä¸‹æ–¹ Docker æ‡‰ç”¨åªæ”¯æ´ä»¥ ï¼·indows ç‚ºåŸºåº•çš„ Image&lt;/p&gt;
&lt;/div&gt;
&lt;h1 id=&quot;ä½¿ç”¨-Scoop-å®‰è£-Docker&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#ä½¿ç”¨-Scoop-å®‰è£-Docker&quot;&gt;&lt;/a&gt;ä½¿ç”¨ Scoop å®‰è£ Docker&lt;/h1&gt;
&lt;p&gt;åŸ·è¡Œä¸‹æ–¹å‘½ä»¤å®‰è£&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scoop install docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
    <category term="Docker" scheme="https://choutinghsiao.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>WSL2 ç§»å‹•è‡³å…¶å®ƒç¡¬ç¢Ÿ</title>
    <link href="https://choutinghsiao.github.io/2023/05/05/Wsl2Disk/"/>
    <id>https://choutinghsiao.github.io/2023/05/05/Wsl2Disk/</id>
    <published>2023-05-05T00:10:00.000Z</published>
    <updated>2024-02-04T13:46:50.182Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ—å‡ºå·²å®‰è£çš„-Linux-ç™¼è¡Œç‰ˆ"><a class="header-anchor" href="#åˆ—å‡ºå·²å®‰è£çš„-Linux-ç™¼è¡Œç‰ˆ"></a>åˆ—å‡ºå·²å®‰è£çš„ Linux ç™¼è¡Œç‰ˆ</h1><p>åŸ·è¡Œä¸‹æ–¹å‘½ä»¤</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">-l</span> <span class="literal">-v</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="é·ç§»è‡³ç£ç¢Ÿæ©Ÿ-D"><a class="header-anchor" href="#é·ç§»è‡³ç£ç¢Ÿæ©Ÿ-D"></a>é·ç§»è‡³ç£ç¢Ÿæ©Ÿ D</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°å‡ºå·²å®‰è£çš„ Linux ç™¼è¡Œç‰ˆå£“ç¸®æª”</span></span><br><span class="line">wsl <span class="literal">--export</span> <span class="string">&quot;Ubuntu-22.04&quot;</span> d:\ubuntu.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»é™¤ WSL</span></span><br><span class="line">wsl <span class="literal">--unregister</span> <span class="string">&quot;Ubuntu-22.04&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹è§£å£“ç¸®çš„ç›®éŒ„</span></span><br><span class="line">mkdir d:\Ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># Linux ç™¼è¡Œç‰ˆå£“ç¸®æª”è§£å£“ç¸®è‡³æ–°ç›®éŒ„å¾ŒåŠ å…¥ WSL</span></span><br><span class="line">wsl <span class="literal">--import</span> <span class="string">&quot;Ubuntu-22.04&quot;</span> d:\ubuntu d:\ubuntu.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆªé™¤ Linux ç™¼è¡Œç‰ˆå£“ç¸®æª”</span></span><br><span class="line"><span class="built_in">del</span> d:\ubuntu.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># å› é‡æ–°å»ºç«‹ WSL æœƒä»¥ root ç‚ºé è¨­å¸³æˆ¶ï¼Œéœ€é‡æ–°è¨­å®šé è¨­å¸³æˆ¶</span></span><br><span class="line">ubuntu2204.exe config <span class="literal">--default-user</span> ubuntu</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://learn.microsoft.com/zh-tw/windows/wsl/use-custom-distro">åŒ¯å…¥ä»»ä½•è¦èˆ‡ WSL æ­é…ä½¿ç”¨çš„ Linux ç™¼è¡Œç‰ˆæœ¬</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;åˆ—å‡ºå·²å®‰è£çš„-Linux-ç™¼è¡Œç‰ˆ&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#åˆ—å‡ºå·²å®‰è£çš„-Linux-ç™¼è¡Œç‰ˆ&quot;&gt;&lt;/a&gt;åˆ—å‡ºå·²å®‰è£çš„ Linux ç™¼è¡Œç‰ˆ&lt;/h1&gt;
&lt;p&gt;åŸ·è¡Œä¸‹æ–¹å‘½ä»¤&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wsl &lt;span class=&quot;literal&quot;&gt;-l&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;-v&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
  </entry>
  
  <entry>
    <title>WSL2 é–‹æ”¾ Docker å¤–éƒ¨é€£ç·š</title>
    <link href="https://choutinghsiao.github.io/2023/04/29/Wsl2Docker/"/>
    <id>https://choutinghsiao.github.io/2023/04/29/Wsl2Docker/</id>
    <published>2023-04-29T21:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.182Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é–‹æ”¾å¤–éƒ¨é€£ç·šè‡³-Dockerï¼Œæœ‰å…©ç¨®æ–¹å¼å¯æ“‡ä¸€è¨­å®š"><a class="header-anchor" href="#é–‹æ”¾å¤–éƒ¨é€£ç·šè‡³-Dockerï¼Œæœ‰å…©ç¨®æ–¹å¼å¯æ“‡ä¸€è¨­å®š"></a>é–‹æ”¾å¤–éƒ¨é€£ç·šè‡³ Dockerï¼Œæœ‰å…©ç¨®æ–¹å¼å¯æ“‡ä¸€è¨­å®š</h1><h2 id="å»ºç«‹-daemon-json"><a class="header-anchor" href="#å»ºç«‹-daemon-json"></a>å»ºç«‹ daemon.json</h2><p>å»ºç«‹ â€˜/etc/docker/daemon.jsonâ€™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>åŠ å…¥ä»¥ä¸‹è¨­å®š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;hosts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;unix:///var/run/docker.sock&quot;</span><span class="punctuation">,</span> <span class="string">&quot;tcp://0.0.0.0:&quot;</span> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="è¨­å®š-Docker-æœå‹™"><a class="header-anchor" href="#è¨­å®š-Docker-æœå‹™"></a>è¨­å®š Docker æœå‹™</h2><p>èª¿æ•´æœå‹™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl edit docker.service</span><br></pre></td></tr></table></figure><p>æœå‹™æŒ‡ä»¤çµå°¾åŠ å…¥ -H tcp://127.0.0.1:2375</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">ExecStart=</span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// -H tcp://127.0.0.1:2375</span><br></pre></td></tr></table></figure><p>é‡å•Ÿæœå‹™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker.service</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="ç¢ºèª-docker-é€£ç·š-2375æ˜¯å¦å­˜åœ¨"><a class="header-anchor" href="#ç¢ºèª-docker-é€£ç·š-2375æ˜¯å¦å­˜åœ¨"></a>ç¢ºèª docker é€£ç·š *:2375æ˜¯å¦å­˜åœ¨</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -peanut | grep :2375</span><br></pre></td></tr></table></figure><h1 id="Chocolatey-å®‰è£-Docker-CLI"><a class="header-anchor" href="#Chocolatey-å®‰è£-Docker-CLI"></a>Chocolatey å®‰è£ Docker CLI</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install docker<span class="literal">-cli</span></span><br></pre></td></tr></table></figure><h1 id="ä¸»æ©Ÿé€£ç·šè¨­å®šæœ‰å…©ç¨®æ–¹å¼"><a class="header-anchor" href="#ä¸»æ©Ÿé€£ç·šè¨­å®šæœ‰å…©ç¨®æ–¹å¼"></a>ä¸»æ©Ÿé€£ç·šè¨­å®šæœ‰å…©ç¨®æ–¹å¼</h1><ol><li>è¨­å®šç’°å¢ƒè®Šæ•¸ DOCKER_HOST</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Environment</span>]::SetEnvironmentVariable(<span class="string">&#x27;DOCKER_HOST&#x27;</span>, <span class="string">&quot;tcp://<span class="variable">$</span>(<span class="variable">$wslip</span>):2375&quot;</span>, <span class="string">&#x27;User&#x27;</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>è¨­å®š docker context</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å–å¾— WSL çš„ IP ä½ç½®</span></span><br><span class="line"><span class="variable">$wslip</span> = wsl <span class="literal">--</span> ip <span class="literal">-o</span> <span class="literal">-4</span> <span class="literal">-json</span> addr list eth0 | <span class="built_in">ConvertFrom-Json</span> | %&#123; <span class="variable">$_</span>.addr_info.local &#125; ` | ?&#123; <span class="variable">$_</span> &#125;</span><br><span class="line"><span class="built_in">Write-Host</span> <span class="string">&quot;Setting Docker context &#x27;wsl&#x27; to host=tcp://<span class="variable">$</span>(<span class="variable">$wslip</span>):2375&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ context</span></span><br><span class="line">docker context create wsl <span class="literal">--docker</span> <span class="string">&quot;host=tcp://<span class="variable">$</span>(<span class="variable">$wslip</span>):2375&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–° context</span></span><br><span class="line">docker context update wsl <span class="literal">--docker</span> <span class="string">&quot;host=tcp://<span class="variable">$</span>(<span class="variable">$wslip</span>):2375&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ context</span></span><br><span class="line">docker context use wsl</span><br><span class="line">docker <span class="literal">--context</span> wsl <span class="built_in">ps</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¡¯ç¤ºç›®å‰è¨­å®šçš„ context</span></span><br><span class="line">docker context <span class="built_in">ls</span> <span class="literal">--format</span>=<span class="string">&quot;&#123;&#123;json .&#125;&#125;&quot;</span></span><br></pre></td></tr></table></figure><h1 id="Powershell-å–å¾—-WSL-çš„-IP-ä½ç½®"><a class="header-anchor" href="#Powershell-å–å¾—-WSL-çš„-IP-ä½ç½®"></a>Powershell å–å¾— WSL çš„ IP ä½ç½®</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">--</span> ip <span class="literal">-o</span> <span class="literal">-4</span> <span class="literal">-json</span> addr list eth0 `</span><br><span class="line">| <span class="built_in">ConvertFrom-Json</span> `</span><br><span class="line">| %&#123; <span class="variable">$_</span>.addr_info.local &#125; `</span><br><span class="line">| ?&#123; <span class="variable">$_</span> &#125;</span><br></pre></td></tr></table></figure><h1 id="æ¸¬è©¦-Docker-å‘½ä»¤"><a class="header-anchor" href="#æ¸¬è©¦-Docker-å‘½ä»¤"></a>æ¸¬è©¦ Docker å‘½ä»¤</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="literal">-H</span> [<span class="type">YOUR_WSL_IP</span>] <span class="built_in">ps</span></span><br></pre></td></tr></table></figure><!-- sudo dockerd& --><!-- docker run --rm hello-world --><h1 id="ç™»å…¥-wsl-è‡ªå‹•å•Ÿå‹•-Docker"><a class="header-anchor" href="#ç™»å…¥-wsl-è‡ªå‹•å•Ÿå‹•-Docker"></a>ç™»å…¥ wsl è‡ªå‹•å•Ÿå‹• Docker</h1><p>ä¿®æ”¹/etc/profile</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/profile</span><br></pre></td></tr></table></figure><p>åŠ å…¥ä»¥ä¸‹è¨­å®š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export DOCKER_HOST=&quot;tcp://127.0.0.1:2375&quot;</span><br><span class="line">sudo service docker start</span><br></pre></td></tr></table></figure><h1 id="ç„¡å¯†ç¢¼-sudo-æˆæ¬Š-ä¸å»ºè­°ç”¨åœ¨ç”Ÿç”¢ç’°å¢ƒ"><a class="header-anchor" href="#ç„¡å¯†ç¢¼-sudo-æˆæ¬Š-ä¸å»ºè­°ç”¨åœ¨ç”Ÿç”¢ç’°å¢ƒ"></a>ç„¡å¯†ç¢¼ sudo æˆæ¬Š(ä¸å»ºè­°ç”¨åœ¨ç”Ÿç”¢ç’°å¢ƒ)</h1><p>ä¿®æ”¹/etc/sudoers</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/sudoers</span><br></pre></td></tr></table></figure><p>åŠ å…¥ä»¥ä¸‹è¨­å®š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%ubuntu ALL=(ALL:ALL) NOPASSWD:ALL</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://community.chocolatey.org/packages/docker-cli">Daemon CLI (dockerd)</a></li><li><a href="https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file">Chocolatey Docker CLI</a></li><li><a href="https://docs.docker.com/config/daemon/remote-access/">Configure remote access for Docker daemon</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;é–‹æ”¾å¤–éƒ¨é€£ç·šè‡³-Dockerï¼Œæœ‰å…©ç¨®æ–¹å¼å¯æ“‡ä¸€è¨­å®š&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#é–‹æ”¾å¤–éƒ¨é€£ç·šè‡³-Dockerï¼Œæœ‰å…©ç¨®æ–¹å¼å¯æ“‡ä¸€è¨­å®š&quot;&gt;&lt;/a&gt;é–‹æ”¾å¤–éƒ¨é€£ç·šè‡³ Dockerï¼Œæœ‰å…©ç¨®æ–¹å¼å¯æ“‡ä¸€è¨­å®š&lt;/h1&gt;
&lt;h2 id=&quot;å»ºç«‹-daemon-json&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å»ºç«‹-daemon-json&quot;&gt;&lt;/a&gt;å»ºç«‹ daemon.json&lt;/h2&gt;
&lt;p&gt;å»ºç«‹ â€˜/etc/docker/daemon.jsonâ€™&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo nano /etc/docker/daemon.json&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åŠ å…¥ä»¥ä¸‹è¨­å®š&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&amp;quot;hosts&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;unix:///var/run/docker.sock&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;tcp://0.0.0.0:&amp;quot;&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&amp;quot;tls&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;è¨­å®š-Docker-æœå‹™&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#è¨­å®š-Docker-æœå‹™&quot;&gt;&lt;/a&gt;è¨­å®š Docker æœå‹™&lt;/h2&gt;
&lt;p&gt;èª¿æ•´æœå‹™&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl edit docker.service&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æœå‹™æŒ‡ä»¤çµå°¾åŠ å…¥ -H tcp://127.0.0.1:2375&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[Service]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ExecStart=&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ExecStart=/usr/bin/dockerd -H fd:// -H tcp://127.0.0.1:2375&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é‡å•Ÿæœå‹™&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl daemon-reload&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl restart docker.service&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
    <category term="Docker" scheme="https://choutinghsiao.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>WSL2 è¨­å®šå›ºå®š IP</title>
    <link href="https://choutinghsiao.github.io/2023/04/29/Wsl2Network/"/>
    <id>https://choutinghsiao.github.io/2023/04/29/Wsl2Network/</id>
    <published>2023-04-29T21:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.182Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¨­å®š-DNS"><a class="header-anchor" href="#è¨­å®š-DNS"></a>è¨­å®š DNS</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆªé™¤åŸå§‹çš„ resolv.conf è¨­å®š</span></span><br><span class="line">sudo <span class="built_in">rm</span> /etc/resolv.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ resolv.conf è¨­å®šï¼ŒåŠ å…¥è‡ªè¨‚ DNS</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;nameserver 192.168.50.1&quot; &gt; /etc/resolv.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å…¥ Google çš„ DNS åŠ é€Ÿ</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;nameserver 8.8.8.8&quot; &gt;&gt; /etc/resolv.conf&#x27;</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;nameserver 8.8.4.4&quot; &gt;&gt; /etc/resolv.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¨­å®š /etc/wsl.conf</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;[network]&quot; &gt; /etc/wsl.conf&#x27;</span></span><br><span class="line">sudo bash -c <span class="string">&#x27;echo &quot;generateResolvConf = false&quot; &gt;&gt; /etc/wsl.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é–å®š resolv.conf è¨­å®š</span></span><br><span class="line">sudo chattr +i /etc/resolv.conf</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="Powershell-è¨­å®š-Ububtu-ç¶²å¡"><a class="header-anchor" href="#Powershell-è¨­å®š-Ububtu-ç¶²å¡"></a>Powershell è¨­å®š Ububtu ç¶²å¡</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœå°‹ eth0 ç¶²å¡ IP è¨­å®š</span></span><br><span class="line"><span class="variable">$ipAddr</span> = wsl <span class="literal">-u</span> root /bin/bash <span class="literal">-c</span> <span class="string">&quot;ip addr show eth0 | grep &#x27;inet\b&#x27;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$ipAddr</span> = <span class="variable">$ipAddr</span>.Trim().Split(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¢ºèªæ˜¯å¦ç‚ºè‡ªè¨‚çš„ç¶²å¡è¨­å®š</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$ipAddr</span>.Contains(<span class="string">&quot;192.168.50.2&quot;</span>))&#123;</span><br><span class="line">  <span class="comment"># ç§»é™¤ Ububtu ç¶²å¡è¨­å®š</span></span><br><span class="line">  wsl <span class="literal">-u</span> root /bin/bash <span class="literal">-c</span> <span class="string">&quot;ip addr del <span class="variable">$ipAddr</span> dev eth0&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># åŠ å…¥è‡ªè¨‚çš„ç¶²å¡</span></span><br><span class="line">  wsl <span class="literal">-u</span> root /bin/bash <span class="literal">-c</span> <span class="string">&quot;ip addr add 192.168.50.2/24 broadcast 192.168.50.255 dev eth0&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># åŠ å…¥è‡ªè¨‚çš„è·¯ç”±</span></span><br><span class="line">  wsl <span class="literal">-u</span> root /bin/bash <span class="literal">-c</span> <span class="string">&quot;ip route add 0.0.0.0/0 via 192.168.50.1 dev eth0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- sudo ip addr del $(ip addr show eth0 | grep 'inet\b' | awk '{print $2}' | head -n 1) dev eth0 --><!-- sudo ip addr add 192.168.50.2/24 broadcast 192.168.50.255 dev eth0 --><!-- sudo ip route add 0.0.0.0/0 via 192.168.50.1 dev eth0 --><h1 id="Powershell-è¨­å®š-vEthernet-WSL"><a class="header-anchor" href="#Powershell-è¨­å®š-vEthernet-WSL"></a>Powershell è¨­å®š vEthernet (WSL)</h1><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¢ºèªæ˜¯å¦ç‚ºè‡ªè¨‚çš„ vEthernet (WSL) è¨­å®š</span></span><br><span class="line"><span class="keyword">if</span>(!(<span class="built_in">Get-NetAdapter</span> <span class="string">&#x27;vEthernet (WSL)&#x27;</span> | <span class="built_in">Get-NetIPAddress</span>).IPAddress.Contains(<span class="string">&#x27;192.168.50.1&#x27;</span>))&#123;</span><br><span class="line">  <span class="comment"># ç§»é™¤ vEthernet (WSL)è¨­å®š</span></span><br><span class="line">  <span class="built_in">Get-NetAdapter</span> <span class="string">&#x27;vEthernet (WSL)&#x27;</span> | <span class="built_in">Get-NetIPAddress</span> | <span class="built_in">Remove-NetIPAddress</span> <span class="literal">-Confirm</span>:<span class="variable">$False</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># åŠ å…¥è‡ªè¨‚çš„ vEthernet (WSL)</span></span><br><span class="line">  <span class="built_in">New-NetIPAddress</span> <span class="literal">-IPAddress</span> <span class="number">192.168</span>.<span class="number">50.1</span> <span class="literal">-PrefixLength</span> <span class="number">24</span> <span class="literal">-InterfaceAlias</span> <span class="string">&#x27;vEthernet (WSL)&#x27;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># ç§»é™¤ WSLNat è¨­å®š</span></span><br><span class="line">  <span class="built_in">Get-NetNat</span> | ? Name <span class="operator">-Eq</span> WSLNat | <span class="built_in">Remove-NetNat</span> <span class="literal">-Confirm</span>:<span class="variable">$False</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># åŠ å…¥è‡ªè¨‚çš„ WSLNat</span></span><br><span class="line">  <span class="built_in">New-NetNat</span> <span class="literal">-Name</span> WSLNat <span class="literal">-InternalIPInterfaceAddressPrefix</span> <span class="number">192.168</span>.<span class="number">50.0</span>/<span class="number">24</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://zhuanlan.zhihu.com/p/380779630">çŸ¥ä¹-çµ¦ WSL2 è¨­ç½®éœæ…‹IPåœ°å€</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;è¨­å®š-DNS&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#è¨­å®š-DNS&quot;&gt;&lt;/a&gt;è¨­å®š DNS&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# åˆªé™¤åŸå§‹çš„ resolv.conf è¨­å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo &lt;span class=&quot;built_in&quot;&gt;rm&lt;/span&gt; /etc/resolv.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å»ºç«‹ resolv.conf è¨­å®šï¼ŒåŠ å…¥è‡ªè¨‚ DNS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;nameserver 192.168.50.1&amp;quot; &amp;gt; /etc/resolv.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# åŠ å…¥ Google çš„ DNS åŠ é€Ÿ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;nameserver 8.8.8.8&amp;quot; &amp;gt;&amp;gt; /etc/resolv.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;nameserver 8.8.4.4&amp;quot; &amp;gt;&amp;gt; /etc/resolv.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# è¨­å®š /etc/wsl.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;[network]&amp;quot; &amp;gt; /etc/wsl.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo bash -c &lt;span class=&quot;string&quot;&gt;&amp;#x27;echo &amp;quot;generateResolvConf = false&amp;quot; &amp;gt;&amp;gt; /etc/wsl.conf&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# é–å®š resolv.conf è¨­å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo chattr +i /etc/resolv.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/categories/Wsl2/"/>
    
    
    <category term="Wsl2" scheme="https://choutinghsiao.github.io/tags/Wsl2/"/>
    
  </entry>
  
  <entry>
    <title>Http çš„ Get æ–¹æ³•å‚³å…¥ List åƒæ•¸</title>
    <link href="https://choutinghsiao.github.io/2023/01/21/NetHttpGetWithList/"/>
    <id>https://choutinghsiao.github.io/2023/01/21/NetHttpGetWithList/</id>
    <published>2023-01-21T18:10:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å»ºç«‹é¡åˆ¥"><a class="header-anchor" href="#å»ºç«‹é¡åˆ¥"></a>å»ºç«‹é¡åˆ¥</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span> &#123;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="å»ºç«‹-HttpGet-æ–¹æ³•"><a class="header-anchor" href="#å»ºç«‹-HttpGet-æ–¹æ³•"></a>å»ºç«‹ HttpGet æ–¹æ³•</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">ApiController</span>]</span><br><span class="line">[<span class="meta">Route(<span class="string">&quot;[controller]&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserController</span> : <span class="title">ControllerBase</span></span><br><span class="line">&#123;</span><br><span class="line">  [<span class="meta">HttpGet</span>]</span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">Get</span>(<span class="params">[FromQuery] List&lt;User&gt; user</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">return</span> user;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="çµ„åˆ-Request-çš„-Url"><a class="header-anchor" href="#çµ„åˆ-Request-çš„-Url"></a>çµ„åˆ Request çš„ Url</h1><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://example.com/User?user[0].Name=&#x27;å¼µä¸‰&#x27;&amp;user[0].Age=10&amp;user[1].Name=&#x27;æå››&#x27;&amp;user[1].Age=20</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://stackoverflow.com/questions/3061273/send-an-array-with-an-http-get">Send an Array with an HTTP Get</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å»ºç«‹é¡åˆ¥&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å»ºç«‹é¡åˆ¥&quot;&gt;&lt;/a&gt;å»ºç«‹é¡åˆ¥&lt;/h1&gt;
&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; Name &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; Age &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ AddInMemoryCollection è¨­å®š Configuration</title>
    <link href="https://choutinghsiao.github.io/2023/01/21/NetAddInMemoryCollection/"/>
    <id>https://choutinghsiao.github.io/2023/01/21/NetAddInMemoryCollection/</id>
    <published>2023-01-21T18:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="appsettings-json-è¨­å®šå¦‚ä¸‹"><a class="header-anchor" href="#appsettings-json-è¨­å®šå¦‚ä¸‹"></a>appsettings.json è¨­å®šå¦‚ä¸‹</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Logging&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;LogLevel&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Information&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Microsoft.AspNetCore&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Warning&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="è½‰æ›ç‚º-Dictionary-string-string"><a class="header-anchor" href="#è½‰æ›ç‚º-Dictionary-string-string"></a>è½‰æ›ç‚º Dictionary&lt;string, string&gt;</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; inMemorySettings = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; &#123;</span><br><span class="line">    &#123;<span class="string">&quot;Logging:LogLevel:Default&quot;</span>,  <span class="string">&quot;Information&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;Logging:LogLevel:Microsoft.AspNetCore&quot;</span>,  <span class="string">&quot;Warning&quot;</span>&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="å»ºç«‹-Configuration"><a class="header-anchor" href="#å»ºç«‹-Configuration"></a>å»ºç«‹ Configuration</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IConfiguration configuration = <span class="keyword">new</span> ConfigurationBuilder()</span><br><span class="line">            .AddInMemoryCollection(inMemorySettings)</span><br><span class="line">            .Build();</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.memoryconfigurationbuilderextensions.addinmemorycollection?view=dotnet-plat-ext-7.0">MemoryConfigurationBuilderExtensions.AddInMemoryCollection Method</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;appsettings-json-è¨­å®šå¦‚ä¸‹&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#appsettings-json-è¨­å®šå¦‚ä¸‹&quot;&gt;&lt;/a&gt;appsettings.json è¨­å®šå¦‚ä¸‹&lt;/h1&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&amp;quot;Logging&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&amp;quot;LogLevel&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;attr&quot;&gt;&amp;quot;Default&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;Information&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;attr&quot;&gt;&amp;quot;Microsoft.AspNetCore&amp;quot;&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;Warning&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="IConfiguration" scheme="https://choutinghsiao.github.io/tags/IConfiguration/"/>
    
  </entry>
  
  <entry>
    <title>Whistle ä»£ç†è¦å‰‡ä½¿ç”¨</title>
    <link href="https://choutinghsiao.github.io/2023/01/20/WhistleProxyRule/"/>
    <id>https://choutinghsiao.github.io/2023/01/20/WhistleProxyRule/</id>
    <published>2023-01-20T16:10:00.000Z</published>
    <updated>2024-02-04T13:46:50.182Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Dns-ä»£ç†è¨­å®š"><a class="header-anchor" href="#Dns-ä»£ç†è¨­å®š"></a>Dns ä»£ç†è¨­å®š</h1><ul><li>åœ¨ Rules é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œè¨­å®š Domain å°æ‡‰ Ip ä½ç½®  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">example.<span class="attribute">com</span> <span class="number">192.168.0.1</span></span><br></pre></td></tr></table></figure></li></ul><span id="more"></span><h1 id="Http-çš„-StatusCode-ä»£ç†è¨­å®š"><a class="header-anchor" href="#Http-çš„-StatusCode-ä»£ç†è¨­å®š"></a>Http çš„ StatusCode ä»£ç†è¨­å®š</h1><ul><li>åœ¨ Rules é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œè¨­å®šç‹€æ…‹ç¢¼  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^https://example.com/User/<span class="attribute">Get</span> statusCode://200</span><br></pre></td></tr></table></figure></li></ul><h1 id="Http-çš„-Headers-ä»£ç†è¨­å®š"><a class="header-anchor" href="#Http-çš„-Headers-ä»£ç†è¨­å®š"></a>Http çš„ Headers ä»£ç†è¨­å®š</h1><ul><li><p>åœ¨ Values é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œå‘½åç‚º corsheaders</p>  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line">Content-Type: application/json; charset=utf8</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ Rules é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œè¨­å®š Headers</p>  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^https://example.com/User/<span class="attribute">Get</span> resHeaders://&#123;corsheaders&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="Http-çš„-Body-ä»£ç†è¨­å®š"><a class="header-anchor" href="#Http-çš„-Body-ä»£ç†è¨­å®š"></a>Http çš„ Body ä»£ç†è¨­å®š</h1><ul><li><p>åœ¨ Values é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œå‘½åç‚º User.json</p>  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¼µä¸‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Age&quot;</span><span class="punctuation">:</span> <span class="number">18</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ Rules é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œè¨­å®š Headers</p>  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^https://example.com/User/<span class="attribute">Get</span> resBody://&#123;User.json&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="ç¶²é åµŒå…¥-Js-æª”æ¡ˆä»£ç†è¨­å®š"><a class="header-anchor" href="#ç¶²é åµŒå…¥-Js-æª”æ¡ˆä»£ç†è¨­å®š"></a>ç¶²é åµŒå…¥ Js æª”æ¡ˆä»£ç†è¨­å®š</h1><ul><li><p>åœ¨ Values é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œå‘½åç‚º test.js</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ Rules é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œè¨­å®š Js æª”æ¡ˆ</p>  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^https://example.com/index.<span class="attribute">html</span> jsAppend://&#123;test.js&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="Socks-ä»£ç†è¨­å®š"><a class="header-anchor" href="#Socks-ä»£ç†è¨­å®š"></a>Socks ä»£ç†è¨­å®š</h1><p>æ­é…<a href="/2023/05/07/LinuxSshTunnel/" title="ä½¿ç”¨ SSH å»ºç«‹é€šé“">SSH</a>å‹•æ…‹ç«¯å£è½‰ç™¼è«‹æ±‚</p><ul><li>åœ¨ Rules é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œè¨­å®š Domain å°æ‡‰ Ip ä½ç½®  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">example.<span class="attribute">com</span> socks://127.0.0.1:8080</span><br></pre></td></tr></table></figure></li></ul><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://wproxy.org/whistle/">whistle</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Dns-ä»£ç†è¨­å®š&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#Dns-ä»£ç†è¨­å®š&quot;&gt;&lt;/a&gt;Dns ä»£ç†è¨­å®š&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ Rules é ç±¤åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œè¨­å®š Domain å°æ‡‰ Ip ä½ç½®  &lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;example.&lt;span class=&quot;attribute&quot;&gt;com&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;192.168.0.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Whistle" scheme="https://choutinghsiao.github.io/categories/Whistle/"/>
    
    
    <category term="Whistle" scheme="https://choutinghsiao.github.io/tags/Whistle/"/>
    
  </entry>
  
  <entry>
    <title>å®‰è£ Whistle</title>
    <link href="https://choutinghsiao.github.io/2023/01/20/WhistleProxyInstall/"/>
    <id>https://choutinghsiao.github.io/2023/01/20/WhistleProxyInstall/</id>
    <published>2023-01-20T16:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-Node-å®‰è£-Whistle"><a class="header-anchor" href="#ä½¿ç”¨-Node-å®‰è£-Whistle"></a>ä½¿ç”¨ Node å®‰è£ Whistle</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g whistle</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="å•Ÿå‹•-Whistle"><a class="header-anchor" href="#å•Ÿå‹•-Whistle"></a>å•Ÿå‹• Whistle</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w2 start</span><br></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹-Whistle-ç‹€æ…‹"><a class="header-anchor" href="#æŸ¥çœ‹-Whistle-ç‹€æ…‹"></a>æŸ¥çœ‹ Whistle ç‹€æ…‹</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w2 status</span><br></pre></td></tr></table></figure><h1 id="åœæ­¢-Whistle"><a class="header-anchor" href="#åœæ­¢-Whistle"></a>åœæ­¢ Whistle</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w2 stop</span><br></pre></td></tr></table></figure><h1 id="è¨­å®š-Whistle-ç‚º-Proxy-çš„-Server"><a class="header-anchor" href="#è¨­å®š-Whistle-ç‚º-Proxy-çš„-Server"></a>è¨­å®š Whistle ç‚º Proxy çš„ Server</h1><p><img src="Win10ProxySetting.png" alt="Win10ProxySetting"></p><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://www.npmjs.com/package/whistle">whistle npm</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ä½¿ç”¨-Node-å®‰è£-Whistle&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#ä½¿ç”¨-Node-å®‰è£-Whistle&quot;&gt;&lt;/a&gt;ä½¿ç”¨ Node å®‰è£ Whistle&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm i -g whistle&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Whistle" scheme="https://choutinghsiao.github.io/categories/Whistle/"/>
    
    
    <category term="Whistle" scheme="https://choutinghsiao.github.io/tags/Whistle/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨ Regex ç¾¤çµ„</title>
    <link href="https://choutinghsiao.github.io/2022/05/22/JsRegexGroup/"/>
    <id>https://choutinghsiao.github.io/2022/05/22/JsRegexGroup/</id>
    <published>2022-05-22T14:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Regex-ç¾¤çµ„"><a class="header-anchor" href="#Regex-ç¾¤çµ„"></a>Regex ç¾¤çµ„</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»ºç«‹è¦å‰‡</span></span><br><span class="line"><span class="keyword">var</span> myRegexp = <span class="regexp">/(?&lt;ç¾¤çµ„åç¨±&gt;.*)Test/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸ·è¡Œè¦å‰‡</span></span><br><span class="line"><span class="keyword">var</span> match =  myRegexp.<span class="title function_">exec</span>(<span class="string">&#x27;123Test&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–å¾—åŸ·è¡Œçµæœ output: 123</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(match.<span class="property">groups</span>.ç¾¤çµ„åç¨±);</span><br></pre></td></tr></table></figure><span id="more"></span><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges">MDN</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Regex-ç¾¤çµ„&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#Regex-ç¾¤çµ„&quot;&gt;&lt;/a&gt;Regex ç¾¤çµ„&lt;/h1&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å»ºç«‹è¦å‰‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myRegexp = &lt;span class=&quot;regexp&quot;&gt;/(?&amp;lt;ç¾¤çµ„åç¨±&amp;gt;.*)Test/g&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åŸ·è¡Œè¦å‰‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; match =  myRegexp.&lt;span class=&quot;title function_&quot;&gt;exec&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;123Test&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å–å¾—åŸ·è¡Œçµæœ output: 123&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(match.&lt;span class=&quot;property&quot;&gt;groups&lt;/span&gt;.ç¾¤çµ„åç¨±);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Javascript" scheme="https://choutinghsiao.github.io/categories/Javascript/"/>
    
    
    <category term="Javascript" scheme="https://choutinghsiao.github.io/tags/Javascript/"/>
    
    <category term="Regex" scheme="https://choutinghsiao.github.io/tags/Regex/"/>
    
  </entry>
  
  <entry>
    <title>ä¾å­—å…ƒå…§ç¢¼è½‰æ› Big5 èˆ‡ Unicode</title>
    <link href="https://choutinghsiao.github.io/2022/05/22/NetBig5AndUnicode/"/>
    <id>https://choutinghsiao.github.io/2022/05/22/NetBig5AndUnicode/</id>
    <published>2022-05-22T14:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Big5-å­—å…ƒè½‰æ›"><a class="header-anchor" href="#Big5-å­—å…ƒè½‰æ›"></a>Big5 å­—å…ƒè½‰æ›</h1><p>Big5 ä¾å‚³å…¥å…§ç¢¼è½‰æˆå­—å…ƒ</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»ºç«‹å…©ä½å…ƒé™£åˆ—</span></span><br><span class="line"><span class="built_in">byte</span>[] codeBytes = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¬²è½‰æ›å…§ç¢¼å‰å…©å­—è½‰ç‚º16é€²åˆ¶</span></span><br><span class="line">codeBytes[<span class="number">0</span>] = (<span class="built_in">byte</span>)Convert.ToInt32(<span class="string">&quot;æ¬²è½‰æ›å…§ç¢¼&quot;</span>.Substring(<span class="number">0</span>, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¬²è½‰æ›å…§ç¢¼å¾Œå…©å­—è½‰ç‚º16é€²åˆ¶</span></span><br><span class="line">codeBytes[<span class="number">1</span>] = (<span class="built_in">byte</span>)Convert.ToInt32(<span class="string">&quot;æ¬²è½‰æ›å…§ç¢¼&quot;</span>.Substring(<span class="number">2</span>, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½‰æˆå­—å…ƒ</span></span><br><span class="line">Encoding big5 = Encoding.GetEncoding(<span class="number">950</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> result = big5.GetString(bytes);</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="Unicode-å­—å…ƒè½‰æ›"><a class="header-anchor" href="#Unicode-å­—å…ƒè½‰æ›"></a>Unicode å­—å…ƒè½‰æ›</h1><p>Unicode ä¾å‚³å…¥å…§ç¢¼è½‰æˆå­—å…ƒï¼Œèˆ‡ Big5 è½‰æ›çš„æ–¹æ³•é›·åŒï¼Œåªéœ€èª¿æ•´å…§ç¢¼æ”¾ç½®çš„é †åº</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»ºç«‹å…©ä½å…ƒé™£åˆ—</span></span><br><span class="line"><span class="built_in">byte</span>[] bytes = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¬²è½‰æ›å…§ç¢¼å¾Œå…©å­—è½‰ç‚º16é€²åˆ¶</span></span><br><span class="line">bytes[<span class="number">0</span>] = Convert.ToByte(text.Substring(<span class="number">2</span>, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¬²è½‰æ›å…§ç¢¼å‰å…©å­—è½‰ç‚º16é€²åˆ¶</span></span><br><span class="line">bytes[<span class="number">1</span>] = Convert.ToByte(text.Substring(<span class="number">0</span>, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½‰æˆå­—å…ƒ</span></span><br><span class="line">Encoding unicode= Encoding.Unicode;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> result = unicode.GetString(bytes);</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.text.encoding.getstring?view=net-8.0">Encoding.GetString Method</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Big5-å­—å…ƒè½‰æ›&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#Big5-å­—å…ƒè½‰æ›&quot;&gt;&lt;/a&gt;Big5 å­—å…ƒè½‰æ›&lt;/h1&gt;
&lt;p&gt;Big5 ä¾å‚³å…¥å…§ç¢¼è½‰æˆå­—å…ƒ&lt;/p&gt;
&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å»ºç«‹å…©ä½å…ƒé™£åˆ—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;byte&lt;/span&gt;[] codeBytes = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;byte&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ¬²è½‰æ›å…§ç¢¼å‰å…©å­—è½‰ç‚º16é€²åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;codeBytes[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] = (&lt;span class=&quot;built_in&quot;&gt;byte&lt;/span&gt;)Convert.ToInt32(&lt;span class=&quot;string&quot;&gt;&amp;quot;æ¬²è½‰æ›å…§ç¢¼&amp;quot;&lt;/span&gt;.Substring(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;), &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æ¬²è½‰æ›å…§ç¢¼å¾Œå…©å­—è½‰ç‚º16é€²åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;codeBytes[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = (&lt;span class=&quot;built_in&quot;&gt;byte&lt;/span&gt;)Convert.ToInt32(&lt;span class=&quot;string&quot;&gt;&amp;quot;æ¬²è½‰æ›å…§ç¢¼&amp;quot;&lt;/span&gt;.Substring(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;), &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// è½‰æˆå­—å…ƒ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Encoding big5 = Encoding.GetEncoding(&lt;span class=&quot;number&quot;&gt;950&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; result = big5.GetString(bytes);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term="Linux" scheme="https://choutinghsiao.github.io/tags/Linux/"/>
    
    <category term="Font" scheme="https://choutinghsiao.github.io/tags/Font/"/>
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="Big5" scheme="https://choutinghsiao.github.io/tags/Big5/"/>
    
    <category term="Unicode" scheme="https://choutinghsiao.github.io/tags/Unicode/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨å•†æ¥­é‚è¼¯å±¤é€²è¡Œå–®å…ƒæ¸¬è©¦</title>
    <link href="https://choutinghsiao.github.io/2022/05/01/NetServiceUnitTest/"/>
    <id>https://choutinghsiao.github.io/2022/05/01/NetServiceUnitTest/</id>
    <published>2022-05-01T13:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£-NSubstitute"><a class="header-anchor" href="#å®‰è£-NSubstitute"></a>å®‰è£ NSubstitute</h1><p>å®‰è£ Nuget çš„ NSubstitute å¥—ä»¶</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Package</span> NSubstitute</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="é¡åˆ¥çµæ§‹"><a class="header-anchor" href="#é¡åˆ¥çµæ§‹"></a>é¡åˆ¥çµæ§‹</h1><img  src=http://www.plantuml.com/plantuml/svg/LO_T2e9044RlvoackYd8G2z55YiXWgwi5nYt8HTqNTOnwErRfH-x_iuvyEMza9UXRM0XDRUClIFD3LK0BWn66qTMyCB-OJHZbk7gi5dkYYBU9sii1tlkxaQZKlzyoQxhZNJ-EIcddt9aAKXeCZxLIAcPaMAy7SjV562MYqRuBQQO199by1QlL3MC8m-Gixs5Ioy0><h1 id="å»ºç«‹æ¨¡æ“¬ç‰©ä»¶"><a class="header-anchor" href="#å»ºç«‹æ¨¡æ“¬ç‰©ä»¶"></a>å»ºç«‹æ¨¡æ“¬ç‰©ä»¶</h1><p>å»ºç«‹ Repository çš„æ¨¡æ“¬ç‰©ä»¶</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Repository mockRepository = Substitute.For&lt;Repository&gt;();</span><br><span class="line"></span><br><span class="line">mockRepository</span><br><span class="line">.GetData(Arg.Any&lt;<span class="built_in">string</span>&gt;())</span><br><span class="line">.Returns(<span class="keyword">new</span> Table &#123;</span><br><span class="line">    Id = <span class="number">1</span>,</span><br><span class="line">    Name = <span class="string">&quot;å¼µä¸‰&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="æ³¨å…¥æ¨¡æ“¬ç‰©ä»¶"><a class="header-anchor" href="#æ³¨å…¥æ¨¡æ“¬ç‰©ä»¶"></a>æ³¨å…¥æ¨¡æ“¬ç‰©ä»¶</h1><p>æŠŠ Repository çš„æ¨¡æ“¬ç‰©ä»¶æ³¨å…¥ Service</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Service service = <span class="keyword">new</span> Service(mockRepository);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ Service</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Table result = service.RunLogic();</span><br><span class="line"></span><br><span class="line">Assert.That(result.Name, Is.EqualTo(<span class="string">&quot;å¼µä¸‰&quot;</span>));</span><br></pre></td></tr></table></figure><h1 id="é©—è­‰æ¨¡æ“¬ç‰©ä»¶"><a class="header-anchor" href="#é©—è­‰æ¨¡æ“¬ç‰©ä»¶"></a>é©—è­‰æ¨¡æ“¬ç‰©ä»¶</h1><p>ä¾å‚³å…¥åƒæ•¸åšå›å‚³</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mockRepository</span><br><span class="line">.GetData(<span class="string">&quot;å¼µä¸‰&quot;</span>)</span><br><span class="line">.Returns(<span class="keyword">new</span> Table &#123;</span><br><span class="line">    Id = <span class="number">1</span>,</span><br><span class="line">    Name = <span class="string">&quot;å¼µä¸‰&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mockRepository</span><br><span class="line">.GetData(<span class="string">&quot;æå››&quot;</span>)</span><br><span class="line">.Returns(<span class="keyword">new</span> Table &#123;</span><br><span class="line">    Id = <span class="number">2</span>,</span><br><span class="line">    Name = <span class="string">&quot;æå››&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ¨¡æ“¬å‘¼å«æ–¹æ³•å¤šæ¬¡ä¾åºå›å‚³ä¸åŒå…§å®¹</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mockRepository</span><br><span class="line">.GetData(Arg.Any&lt;<span class="built_in">string</span>&gt;())</span><br><span class="line">.Returns(</span><br><span class="line">    <span class="keyword">new</span> Table</span><br><span class="line">    &#123;</span><br><span class="line">        Id = <span class="number">1</span>,</span><br><span class="line">        Name = <span class="string">&quot;å¼µä¸‰&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">new</span> Table</span><br><span class="line">    &#123;</span><br><span class="line">        Id = <span class="number">2</span>,</span><br><span class="line">        Name = <span class="string">&quot;æå››&quot;</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>é©—è­‰å‘¼å«æ–¹æ³•çš„æ¬¡æ•¸èˆ‡å‚³å…¥åƒæ•¸</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mockRepository</span><br><span class="line">.Received(<span class="number">1</span>)</span><br><span class="line">.GetData(Arg.Is&lt;<span class="built_in">string</span>&gt;(x =&gt; x == <span class="string">&quot;å¼µä¸‰&quot;</span>));</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://nsubstitute.github.io/help.html">NSubstituteæ–‡ä»¶</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å®‰è£-NSubstitute&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å®‰è£-NSubstitute&quot;&gt;&lt;/a&gt;å®‰è£ NSubstitute&lt;/h1&gt;
&lt;p&gt;å®‰è£ Nuget çš„ NSubstitute å¥—ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Install-Package&lt;/span&gt; NSubstitute&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="UnitTest" scheme="https://choutinghsiao.github.io/tags/UnitTest/"/>
    
    <category term="NSubstitute" scheme="https://choutinghsiao.github.io/tags/NSubstitute/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨è³‡æ–™å­˜å–å±¤é€²è¡Œå–®å…ƒæ¸¬è©¦</title>
    <link href="https://choutinghsiao.github.io/2022/05/01/NetRepositoryUnitTest/"/>
    <id>https://choutinghsiao.github.io/2022/05/01/NetRepositoryUnitTest/</id>
    <published>2022-05-01T12:00:00.000Z</published>
    <updated>2024-02-04T13:46:50.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£-Sqlite"><a class="header-anchor" href="#å®‰è£-Sqlite"></a>å®‰è£ Sqlite</h1><p>å®‰è£ Nuget çš„ Sqlite å¥—ä»¶</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Install-Package</span> Microsoft.EntityFrameworkCore.Sqlite</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="å»ºç«‹-DbContext"><a class="header-anchor" href="#å»ºç«‹-DbContext"></a>å»ºç«‹ DbContext</h1><p>å»ºç«‹ EntityFramework çš„ DbContext</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestDbContext</span> : <span class="title">DbContext</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DbSet</span>&lt;<span class="title">Table</span>&gt;? Table</span> &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDbContext</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDbContext</span>(<span class="params">DbContextOptions options</span>) : <span class="title">base</span>(<span class="params">options</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnModelCreating</span>(<span class="params">ModelBuilder modelBuilder</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        modelBuilder.Entity&lt;Table&gt;(entity =&gt; &#123;</span><br><span class="line">            entity.HasKey(x =&gt; x.Id);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-In-Memory-æ¨¡å¼æ“ä½œè³‡æ–™åº«"><a class="header-anchor" href="#ä½¿ç”¨-In-Memory-æ¨¡å¼æ“ä½œè³‡æ–™åº«"></a>ä½¿ç”¨ In-Memory æ¨¡å¼æ“ä½œè³‡æ–™åº«</h1><p>ä½¿ç”¨ Sqlite çš„ In-Memory æ¨¡å¼è¼‰å…¥ DbContext</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SqliteConnection connection = <span class="keyword">new</span> SqliteConnection(<span class="string">&quot;Data Source=:memory:&quot;</span>);</span><br><span class="line"></span><br><span class="line">connection.Open();</span><br><span class="line"></span><br><span class="line">DbContextOptions options = <span class="keyword">new</span> DbContextOptionsBuilder()</span><br><span class="line">.UseSqlite(connection)</span><br><span class="line">.Options;</span><br></pre></td></tr></table></figure><p>ç„¶å¾Œä½¿ç”¨ DbContext çš„è¨­å®šå»ºç«‹è³‡æ–™åº«</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> TestDbContext context = <span class="keyword">new</span> TestDbContext(options);</span><br><span class="line">context.Database.EnsureCreated();</span><br></pre></td></tr></table></figure><p>æœ€å¾Œå¯é–‹å§‹ä½¿ç”¨ EntityFramework é–‹å§‹æ“ä½œè³‡æ–™åº«</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> TestDbContext context = <span class="keyword">new</span> TestDbContext(options);</span><br><span class="line">List&lt;Table&gt; table = context.Table.ToList();</span><br></pre></td></tr></table></figure><h1 id="è‡ªå®šç¾©-Database-Function"><a class="header-anchor" href="#è‡ªå®šç¾©-Database-Function"></a>è‡ªå®šç¾© Database Function</h1><p>å¦‚æœæœ‰ä½¿ç”¨ Sqlite æœªå®šç¾©çš„ Database Function , å¯åœ¨ç¨‹å¼ä¸­ä½¿ç”¨ CreateFunction å®šç¾©</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SqliteConnection connection = <span class="keyword">new</span> SqliteConnection(<span class="string">&quot;Data Source=:memory:&quot;</span>);</span><br><span class="line"></span><br><span class="line">connection.CreateFunction(<span class="string">&quot;current_date&quot;</span>, (x) =&gt; DateTime.Now);</span><br><span class="line"></span><br><span class="line">connection.Open();</span><br></pre></td></tr></table></figure><div class="note warning"><p>ğŸ“œ åƒè€ƒè³‡æ–™</p><ol><li><a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.data.sqlite.sqliteconnection.createfunction?view=msdata-sqlite-6.0.0">Microsoftæ–‡ä»¶</a></li><li><a href="https://csharp.hotexamples.com/examples/-/SQLiteConnection/CreateFunction/php-sqliteconnection-createfunction-method-examples.html">SQLite Examples</a></li></ol></div>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å®‰è£-Sqlite&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å®‰è£-Sqlite&quot;&gt;&lt;/a&gt;å®‰è£ Sqlite&lt;/h1&gt;
&lt;p&gt;å®‰è£ Nuget çš„ Sqlite å¥—ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;Install-Package&lt;/span&gt; Microsoft.EntityFrameworkCore.Sqlite&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/categories/Net/"/>
    
    
    <category term=".Net" scheme="https://choutinghsiao.github.io/tags/Net/"/>
    
    <category term="UnitTest" scheme="https://choutinghsiao.github.io/tags/UnitTest/"/>
    
    <category term="SQLite" scheme="https://choutinghsiao.github.io/tags/SQLite/"/>
    
  </entry>
  
</feed>
